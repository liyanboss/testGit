!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).verifyCenter={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var n={exports:{}};!function(e,n){e.exports=function(){function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,r=void 0,s=void 0,a=function(e,t){w[i]=e,w[i+1]=t,2===(i+=2)&&(s?s(_):O())};function c(e){s=e}function l(e){a=e}var u="undefined"!=typeof window?window:void 0,d=u||{},p=d.MutationObserver||d.WebKitMutationObserver,f="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return process.nextTick(_)}}function m(){return void 0!==r?function(){r(_)}:b()}function y(){var e=0,t=new p(_),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function g(){var e=new MessageChannel;return e.port1.onmessage=_,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(_,1)}}var w=new Array(1e3);function _(){for(var e=0;e<i;e+=2){(0,w[e])(w[e+1]),w[e]=void 0,w[e+1]=void 0}i=0}function C(){try{var e=Function("return this")().require("vertx");return r=e.runOnLoop||e.runOnContext,m()}catch(e){return b()}}var O=void 0;function k(e,t){var n=this,o=new this.constructor(L);void 0===o[E]&&Q(o);var i=n._state;if(i){var r=arguments[i-1];a((function(){return z(i,o,r,n._result)}))}else{U(n,o,e,t)}return o}function S(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t){return e}var n=new t(L);return V(n,e),n}O=f?v():p?y():h?g():void 0===u?C():b();var E=Math.random().toString(36).substring(2);function L(){}var x=void 0,A=1,T=2;function j(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function B(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}function F(e,t,n){a((function(e){var o=!1,i=B(n,t,(function(n){o||(o=!0,t!==n?V(e,n):M(e,n))}),(function(t){o||(o=!0,N(e,t))}),"Settle: "+(e._label||" unknown promise"));!o&&i&&(o=!0,N(e,i))}),e)}function I(e,t){t._state===A?M(e,t._result):t._state===T?N(e,t._result):U(t,void 0,(function(t){return V(e,t)}),(function(t){return N(e,t)}))}function P(e,t,o){t.constructor===e.constructor&&o===k&&t.constructor.resolve===S?I(e,t):void 0===o?M(e,t):n(o)?F(e,t,o):M(e,t)}function V(t,n){if(t===n){N(t,j())}else if(e(n)){var o=void 0;try{o=n.then}catch(e){return void N(t,e)}P(t,n,o)}else{M(t,n)}}function D(e){e._onerror&&e._onerror(e._result),W(e)}function M(e,t){e._state===x&&(e._result=t,e._state=A,0!==e._subscribers.length&&a(W,e))}function N(e,t){e._state===x&&(e._state=T,e._result=t,a(D,e))}function U(e,t,n,o){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+A]=n,i[r+T]=o,0===r&&e._state&&a(W,e)}function W(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,i=void 0,r=e._result,s=0;s<t.length;s+=3){o=t[s],i=t[s+n],o?z(n,o,i,r):i(r)}e._subscribers.length=0}}function z(e,t,o,i){var r=n(o),s=void 0,a=void 0,c=!0;if(r){try{s=o(i)}catch(e){c=!1,a=e}if(t===s){return void N(t,R())}}else{s=i}t._state!==x||(r&&c?V(t,s):!1===c?N(t,a):e===A?M(t,s):e===T&&N(t,s))}function q(e,t){try{t((function(t){V(e,t)}),(function(t){N(e,t)}))}catch(t){N(e,t)}}var H=0;function J(){return H++}function Q(e){e[E]=H++,e._state=void 0,e._result=void 0,e._subscribers=[]}function G(){return new Error("Array Methods must be provided an Array")}var K=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(L),this.promise[E]||Q(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&M(this.promise,this._result))):N(this.promise,G())}return e.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++){this._eachEntry(e[t],t)}},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===S){var i=void 0,r=void 0,s=!1;try{i=e.then}catch(e){s=!0,r=e}if(i===k&&e._state!==x){this._settledAt(e._state,t,e._result)}else if("function"!=typeof i){this._remaining--,this._result[t]=e}else if(n===te){var a=new n(L);s?N(a,r):P(a,e,i),this._willSettleAt(a,t)}else{this._willSettleAt(new n((function(t){return t(e)})),t)}}else{this._willSettleAt(o(e),t)}},e.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===x&&(this._remaining--,e===T?N(o,n):this._result[t]=n),0===this._remaining&&M(o,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;U(e,void 0,(function(e){return n._settledAt(A,t,e)}),(function(e){return n._settledAt(T,t,e)}))},e}();function X(e){return new K(this,e).promise}function Y(e){var t=this;return o(e)?new t((function(n,o){for(var i=e.length,r=0;r<i;r++){t.resolve(e[r]).then(n,o)}})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function Z(e){var t=new this(L);return N(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[E]=J(),this._result=this._state=void 0,this._subscribers=[],L!==t&&("function"!=typeof t&&$(),this instanceof e?q(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,o=t.constructor;return n(e)?t.then((function(t){return o.resolve(e()).then((function(){return t}))}),(function(t){return o.resolve(e()).then((function(){throw t}))})):t.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==t){e=t}else if("undefined"!=typeof self){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var n=e.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===o&&!n.cast){return}}e.Promise=te}return te.prototype.then=k,te.all=X,te.race=Y,te.resolve=S,te.reject=Z,te._setScheduler=c,te._setAsap=l,te._asap=a,te.polyfill=ne,te.Promise=te,te}()}(n);var o=n.exports,i=function(){return i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){for(var i in t=arguments[n]){Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}}return e},i.apply(this,arguments)};function r(e,t){var n={};for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o])}if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++){t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}}return n}function s(e,t,n,i){return new(n||(n=o.Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0]){throw i[1]}return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n){throw new TypeError("Generator is already executing.")}for(;r&&(r=0,a[0]&&(s=0)),s;){try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done){return i}switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}}if(5&a[0]){throw a[1]}return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n){e[o]=n[o]}}return e}"function"==typeof SuppressedError&&SuppressedError;var l=function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=c({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var s in i){i[s]&&(r+="; "+s,!0!==i[s]&&(r+="="+i[s].split(";")[0]))}return document.cookie=e+"="+t.write(o,e)+r}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var r=n[i].split("="),s=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(o[a]=t.read(s,a),e===a){break}}catch(e){}}return e?o[e]:o}},remove:function(e,t){o(e,"",c({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,c({},this.attributes,t))},withConverter:function(t){return e(c({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),u="s_v_web_id",d="/notify/sms/web/send_code",p="/notify/sms/check_code",f=String.fromCharCode.apply(null,[104,116,116,112,115,58,47,47,114,109,99,45,98,111,101,46,98,121,116,101,100,97,110,99,101,46,110,101,116]),h=["@latest","lf-rc2.yhgfb-cn-static.com","lf-rc1.yhgfb-cn-static.com","lf-cdn-tos.bytescm.com"],v=[String.fromCharCode.apply(null,[99,100,110,45,116,111,115,45,99,110,46,98,121,116,101,100,97,110,99,101,46,110,101,116])],m=["lf-ucenter-web.yhgfb-cn-static.com"],y=["slide","whirl"],g=function(e){if(e.ele=e.ele||"captcha_container",e.zIndex=e.zIndex||"111111",e.webdriver=String(window.navigator.webdriver),e.host=e.mainHost||e.host,e.scene_level=e.scene_level||"p2",e.did&&"0"===e.did&&delete e.did,!e.theme){var t=C(e);w(t)&&(e.theme=t)}return e},b=function(e){for(var t=Object.keys(e),n="",o=0;o<t.length;o++){var i=t[o],r=e[i],s="".concat(encodeURIComponent(i),"=").concat(r?encodeURIComponent(r):"");n=o>=1?"".concat(n,"&").concat(s):s}return n},w=function(e){try{return"{}"!==JSON.stringify(e)}catch(e){return!1}},_=function(e){if(document.fullscreenElement){var t="captcha-container-fullscreen",n=document.fullscreenElement.querySelector("#".concat(t));return n||((n=document.createElement("div")).id=t,document.fullscreenElement.appendChild(n)),n.style.display="block",n}var o=document.getElementById(e);return o||((o=document.createElement("div")).id=e,document.body.appendChild(o)),o.style.display="block",o},C=function(e){var t=["bgColor","borderRadius","titleColor","closeIconColor","slideBgColor","slideBorderRadius","slideIconColor","slideSlotBorderRadius","slideSlotBgColor","slideSlotDescColor","slidingSlotBgColor","slidingSlotBgEndColor","refreshIconColor","refreshFontColor","feedbackIconColor","feedbackFontColor","sureBtnBgColor","sureBtnFontColor"],n={};for(var o in e){t.indexOf(o)>=0&&(n[o]=e[o])}return n},O={option:!1,moveHandler:function(e){e.preventDefault()},init:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",(function(){}),t)}catch(e){}this.option=!!e&&{passive:!1}},disable:function(){document.addEventListener("touchmove",this.moveHandler,this.option),console.log("bytedance://disable_swipe")},allow:function(){document.removeEventListener("touchmove",this.moveHandler,this.option),console.log("bytedance://enable_swipe")}},k=function(e){if(k.isDone){return function(){}}function t(t){var n;"error"===(null==t?void 0:t.type)&&(null===(n=t.filename)||void 0===n?void 0:n.indexOf("rc-verifycenter/rmc-captcha"))>-1&&e(t)}return k.isDone=!0,window.addEventListener("error",t,!0),function(){window.removeEventListener("error",t,!0)}};var S,E=function(){var e=this;this.setCookieOption=function(t){t.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(t.domain)||delete t.domain,e.cookieOption=i(i({},e.cookieOption),t)},this.setOptionFp=function(t){e.optionFp=t},this.injectFpToCookie=function(){var t=l.get(u);return t&&0===t.indexOf("verify_")||(t=e.setFpToCookie()),t},this.setFpToCookie=function(t){return t=t||(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(u))||function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,n=(new Date).getTime().toString(36),o=[];o[8]=o[13]=o[18]=o[23]="_",o[14]="4";for(var i=0,r=void 0;i<36;i++){o[i]||(r=0|Math.random()*t,o[i]=e[19==i?3&r|8:r])}return"verify_"+n+"_"+o.join("")}(),l.remove(u),l.remove(u,{secure:!0,sameSite:"none",Partitioned:!0}),l.set(u,t,e.cookieOption),l.get(u)||(l.set(u,t,i(i({},e.cookieOption),{secure:!0,sameSite:"none",Partitioned:!0})),null===localStorage||void 0===localStorage||localStorage.setItem(u,t)),t},this.getOrSetFp=function(t){return s(e,void 0,void 0,(function(){return a(this,(function(e){return t&&t!==this.fp&&(this.fp=this.setFpToCookie(t)),[2,this.fp]}))}))},this.getFp=function(){return e.optionFp?e.optionFp:l.get(u)||(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(u))||""};var t="object"==typeof window.fpCookieOption?window.fpCookieOption:{};t.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(t.domain)||delete t.domain,this.cookieOption=i({expires:60},t),this.fp=this.injectFpToCookie()},L=function(){function e(){var e=this;this.callSuccess=function(){e.successCallbacks.forEach((function(e){e({code:200,data:null,message:"验证通过"})})),e.clearCallback()},this.callClose=function(){e.closeCallbacks.forEach((function(e){e()})),e.clearCallback()},this.callError=function(t){e.captchaOptions.errorCb&&t&&(t.message="[captcha sdk] ".concat(t.message),e.captchaOptions.errorCb(t))},this.clearCallback=function(){e.closeCallbacks.length=0,e.successCallbacks.length=0},this.setCallback=function(t,n){t&&"function"==typeof t&&e.successCallbacks.push(t),n&&"function"==typeof n&&e.closeCallbacks.push(n)},this.outputParams=function(){var t=e.captchaOptions,n=t.aid,o=t.did,i=t.pageId,r=t.repoId,s=t.scene_level,a=t.app_name,c=t.host,l=t.lang,u=t.viewport,d=t.baseEM,p=t.theme,f=t.verify_data,h=t.challenge_code,v=t.extraConfig;return{aid:n,did:o,pageId:i,repoId:r,scene_level:s,app_name:a,host:c||"https://verify.zijieapi.com",lang:l,viewport:u,baseEM:d,challenge_code:h,hideCloseBtn:t.hideCloseBtn,theme:"object"==typeof p?JSON.stringify(p):p,verify_data:"object"==typeof f?JSON.stringify(f):f,extraConfig:"object"==typeof v?JSON.stringify(v):v}},this.options={},this.captchaOptions={},this.closeCallbacks=[],this.successCallbacks=[]}return e.prototype.setOptions=function(e){this.options=e},e.prototype.setCaptchaOptions=function(e){this.clearCallback(),"function"==typeof e.successCb&&this.successCallbacks.push(e.successCb),"function"==typeof e.closeCb&&this.closeCallbacks.push(e.closeCb),this.captchaOptions=e},e}(),x=function(e,t){var n=this;this.listen=function(){n.selfWin.addEventListener("message",n.handleListen)},this.handleListen=function(e){var t,o,i,r,s,a,c;if(e.origin===n.origin){try{var l=JSON.parse(e.data),u=l.type,d=l.data;switch(u){case"ready":null===(t=n.readyListener)||void 0===t||t.call(n,d);break;case"resize":null===(o=n.resizeListener)||void 0===o||o.call(n,d);break;case"close":null===(i=n.closeListener)||void 0===i||i.call(n,d);break;case"success":null===(r=n.successListener)||void 0===r||r.call(n,d);break;case"error":null===(s=n.errorListener)||void 0===s||s.call(n,d);break;case"log":null===(a=n.logListener)||void 0===a||a.call(n,d);break;case"verify":null===(c=n.verify)||void 0===c||c.call(n,d)}}catch(e){}}},this.on=function(e,t){switch(e){case"ready":n.readyListener=t;break;case"resize":n.resizeListener=t;break;case"close":n.closeListener=t;break;case"success":n.successListener=t;break;case"error":n.errorListener=t;break;case"log":n.logListener=t;break;case"verify":n.verify=t}},this.destory=function(){n.selfWin.removeEventListener("message",n.handleListen)},this.selfWin=window,this.otherWin=e,this.origin=t,this.listen()},A=Date.now(),T=function(){function e(e){var t=this;this.isReady=!1,this.show=function(e){return s(t,void 0,void 0,(function(){var t,n,o,r,c,l,u,d,p,v,m,g,w,_,C,k,S,E,L,A,T,j,R,B,F,I=this;return a(this,(function(P){return this.__temp_params__=e,t=e.root,n=e.props,o=n.myFp,r=n.myOption,c=n.myLogger,l=n.loading,u=r.captchaOptions,d=u.host,p=u.disableFrameMode,v=u.iframeHost,m=u.verifyData,g=u.challenge_code,w=document.createElement("iframe"),t.appendChild(w),(_=document.createElement("div")).id="vc_captcha_wrapper",C=this.setStyle(t,w,_,r),k="https://rmc.bytedance.com",(S=d&&d.indexOf("boe-verify")>=0)?k=f:v&&(k=v),(E=m&&y.indexOf(m.subtype)>=0||"3058"==g)&&(O.init(),O.disable()),L=new x(w.contentWindow,k),A=null===(F=r.captchaOptions.hostConfig)||void 0===F?void 0:F.static_domain,T=i({from:"iframe",fp:o.getFp(),env:JSON.stringify({screen:{w:window.screen.width,h:window.screen.height},browser:{w:window.outerWidth,h:window.outerHeight},page:{w:window.innerWidth,h:window.innerHeight},document:{width:document.documentElement.clientWidth},product_host:window.location.host||window.location.pathname,vc_version:"1.0.0.177",maskTime:Date.now(),h5_check_version:r.captchaOptions.h5_check_version}),static_domain:A},r.outputParams()),j=function(e){E&&O.allow(),C(e),I.myVerify.isRender=!1,I.isReady=!1},R=Date.now(),B=function(){return s(I,void 0,void 0,(function(){var e,n,i,s,u,d,p=this;return a(this,(function(a){switch(a.label){case 0:e=r.captchaOptions.hideCloseBtn,L.destory(),w.parentNode===t&&t.removeChild(w),_.parentNode!==t&&t.appendChild(_),a.label=1;case 1:return a.trys.push([1,3,,4]),n=function(e,t,n){if(n||2===arguments.length){for(var o,i=0,r=t.length;i<r;i++){!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i])}}return e.concat(o||Array.prototype.slice.call(t))}([],h,!0),A&&n.push(A),[4,this.loadScript({domains:n,slardar:c.slardar,isBoe:!!S})];case 2:return a.sent(),l.close(),(i=new window.bdCaptcha.CaptchaVerify({info:{aid:T.aid,appName:T.app_name,lang:T.lang,did:T.did,fp:o.getFp(),repoId:T.repoId,pageId:T.pageId},ele:_.id,host:T.host,static_domain:A,baseEM:T.baseEM,viewport:T.viewport,theme:r.captchaOptions.theme,hideCloseBtn:e,env:{maskTime:Date.now(),h5_check_version:r.captchaOptions.h5_check_version},successCb:function(){r.callSuccess(),!1!==r.captchaOptions.autoClose&&j(_)},verify:function(e){c.slardar.report("custom",{mustReport:!0,type:"log",name:"second_verify",level:"warn",content:e}),j(_),p.myVerify.autoRender({commonOptions:{aid:2385},secondVerifyWebOptions:{callBack:function(){r.callSuccess()},closeCallBack:function(){r.callClose()}},verify_data:e})},closeCb:function(){r.callClose(),j(_)},errorCb:function(e){r.callError(e)},onResize:null===(d=r.options.captchaOptions)||void 0===d?void 0:d.onResize})).init(),i.render(T.verify_data||T.challenge_code),[3,4];case 3:return s=a.sent(),l.close(),u=(null==s?void 0:s.message)||"验证码渲染失败",r.callError({name:"render_fail",message:u}),c.slardar.report("blank_screen",{mustReport:!0,score:0,timestamp:Date.now(),error:{type:"captcha-load-error"!==s?"js_error":"resource_error",message:JSON.stringify({message:u,stack:null==s?void 0:s.stack})}},"captcha-render-fail"),this.blankScreen({container:_,hideCloseBtn:e,refresh:function(){c.slardar.reportBufferList(),t.removeChild(_),p.show(p.__temp_params__)},close:function(){r.callClose(),j(_)}}),[3,4];case 4:return[2]}}))}))},l.show(t),p?B():(w.src="".concat(k).concat("/verifycenter/captcha/v2","?").concat(b(function(e){var t={};for(var n in e){e[n]&&(t[n]=e[n])}return t}(T))),w.onload=function(){setTimeout((function(){return s(I,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return!1!==this.isReady?[3,2]:[4,B()];case 1:return e.sent(),[3,3];case 2:l.close(),e.label=3;case 3:return c.trackEvent("load_iframe",{aid:T.aid,is_success:Number(this.isReady),duration:Date.now()-R}),!1===this.isReady&&c.slardar.report("custom",{mustReport:!0,type:"log",name:"iframe_not_ready",level:"warn",content:"0"}),[2]}}))}))}))}),L.on("ready",(function(){I.isReady=!0})),L.on("resize",(function(e){var t,n,o=e.w,i=e.h;w.style.visibility="visible",w.style.width="".concat(o,"px"),w.style.height="".concat(i,"px"),null===(n=null===(t=r.options.captchaOptions)||void 0===t?void 0:t.onResize)||void 0===n||n.call(t,{w:o,h:i})})),L.on("close",(function(){L.destory(),r.callClose(),j(w)})),L.on("success",(function(){L.destory(),r.callSuccess(),!1!==r.captchaOptions.autoClose&&j(w)})),L.on("verify",(function(e){c.slardar.report("custom",{mustReport:!0,type:"log",name:"second_verify",level:"warn",content:e}),j(w),I.myVerify.autoRender({commonOptions:{aid:2385},secondVerifyWebOptions:{callBack:function(){r.callSuccess()},closeCallBack:function(){r.callClose()}},verify_data:e})})),L.on("log",(function(e){c.log(e)})),L.on("error",(function(e){r.callError(e)})),[2]}))}))},this.loadScript=function(e){var n,i,r=e.slardar,s=e.domains,a=e.isBoe;if(null===(n=window.bdCaptcha)||void 0===n?void 0:n.CaptchaVerify){return o.Promise.resolve(0)}var c=k((function(e){var t;r.report("js_error",{mustReport:!0,error:{name:"验证码渲染失败",message:e.message,stack:null===(t=e.error)||void 0===t?void 0:t.stack,filename:e.filename},breadcrumbs:[]},"global-error")}));Date.now()-A>864e5&&window.verifySDK&&(window.verifySDK.captcha_version="@latest");var l=a?"/obj/archi/rmc-captcha/@latest/captcha.js":"/obj/rc-verifycenter/rmc-captcha/".concat((null===(i=window.verifySDK)||void 0===i?void 0:i.captcha_version)||"@latest","/captcha.js"),u=s[s.length-1],d=function(e){if(0===e.length){return c(),o.Promise.reject("captcha-load-error")}var n=e.pop(),i="@latest"===n?"https://".concat(u).concat("/obj/rc-verifycenter/rmc-captcha/@latest/captcha.js"):"https://".concat(n).concat(l);return t._loadScript({url:i,slardar:r}).catch((function(){return d(e)}))};return d(a?v:s).then((function(){c()}))},this.setStyle=function(e,t,n,o){var i=o.captchaOptions,r=i.showMode,s=i.disableSetBodyHidden,a=i.theme;t.style.border="none",t.style.display="block",t.style.visibility="hidden",e.style.display="block","mask"===r&&(e.style.zIndex="111111",e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.512)",e.style.margin="auto",e.style.top="0px",e.style.bottom="0px",e.style.left="0px",e.style.right="0px",n.style.borderRadius="6px",n.style.overflow="hidden",n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translate(-50%, -50%)",t.style.borderRadius="6px",t.style.overflow="hidden",t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform="translate(-50%, -50%)",(null==a?void 0:a.borderRadius)&&(n.style.borderRadius=a.borderRadius,t.style.borderRadius=a.borderRadius));var c=document.body.style.overflow;return s||(document.body.style.overflow="hidden"),function(t){t.parentNode===e&&e.removeChild(t),e.style.display="none",s||(document.body.style.overflow=c)}},this.blankScreen=function(e){var t=e.container,n=e.hideCloseBtn,o=e.refresh,i=e.close;t.innerHTML='<div style="background: #fff;padding: 10px;display:flex;width:310px;font-size:14px;box-sizing:border-box;">\n            '.concat(n?"":'<div id="vc_captcha_err_close" style="position:absolute;right:0px;top:0px;padding:5px;cursor: pointer;">\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.44 2.50738C12.5702 2.3772 12.7812 2.3772 12.9114 2.50738L13.3828 2.97878C13.513 3.10895 13.513 3.32001 13.3828 3.45018L8.90446 7.92853L13.3828 12.4069C13.513 12.537 13.513 12.7481 13.3828 12.8783L12.9114 13.3497C12.7812 13.4799 12.5702 13.4799 12.44 13.3497L7.96165 8.87134L3.48331 13.3497C3.35314 13.4799 3.14208 13.4799 3.01191 13.3497L2.5405 12.8783C2.41033 12.7481 2.41033 12.537 2.5405 12.4069L7.01885 7.92853L2.5405 3.45018C2.41033 3.32001 2.41033 3.10895 2.5405 2.97878L3.01191 2.50738C3.14208 2.3772 3.35314 2.3772 3.48331 2.50738L7.96165 6.98572L12.44 2.50738Z" fill="#999999"></path></svg>\n            </div>','\n            验证码资源加载失败，点击\n            <div style="display:inline-flex;align-items:center;color:#6e9fff;cursor: pointer;" id="vc_captcha_err_fresh">\n                <svg fill="#6e9fff" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M10,4 C12.0559549,4 13.9131832,5.04358655 15.0015086,6.68322231 L15,5.5 C15,5.22385763 15.2238576,5 15.5,5 C15.7761424,5 16,5.22385763 16,5.5 L16,8.5 C16,8.77614237 15.7761424,9 15.5,9 L12.5,9 C12.2238576,9 12,8.77614237 12,8.5 C12,8.22385763 12.2238576,8 12.5,8 L14.5842317,8.00000341 C13.7999308,6.20218044 12.0143541,5 10,5 C7.23857625,5 5,7.23857625 5,10 C5,12.7614237 7.23857625,15 10,15 C11.749756,15 13.3431487,14.0944653 14.2500463,12.6352662 C14.3958113,12.4007302 14.7041063,12.328767 14.9386423,12.4745321 C15.1731784,12.6202971 15.2451415,12.9285921 15.0993765,13.1631281 C14.0118542,14.9129524 12.0990688,16 10,16 C6.6862915,16 4,13.3137085 4,10 C4,6.6862915 6.6862915,4 10,4 Z" fill-rule="nonzero"></path></svg>\n                刷新\n            </div>\n            重新操作。\n        </div>');var r=document.getElementById("vc_captcha_err_fresh"),s=document.getElementById("vc_captcha_err_close");r&&(r.onclick=function(){o()}),s&&(s.onclick=function(){i()})},this.myVerify=e}return e.prototype._loadScript=function(e){var t=e.url,n=e.slardar,i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.crossOrigin="anonymous",i.appendChild(r),r.src=t;var s=Date.now();return new o.Promise((function(e,o){r.onload=function(){n.report("resource",{name:t,entryType:"resource",startTime:s,duration:Date.now()-s},"captcha-load"),e(0)},r.onerror=function(){n.report("resource_error",{type:"script",url:t},"captcha-load"),o("captcha-load-error")}}))},e}(),j=function(){function e(e){this.lists=[],this.bufferList=[];var t="true"===function(e){try{return sessionStorage.getItem(e)}catch(e){}return null}("__VC_MUST_REPORT__")?100:Math.ceil(100*Math.random()),n=t>90?1:-1;this.shouldReport={js_error:1,blank_screen:1,custom:100===t?1:-1,resource:n,resource_error:n},this.commonParams={user_id:e||"0",bid:"verify_center_cn",view_id:"/_1",session_id:"0-a-1-2-c",env:"production",url:window.location.href,sdk_version:"1.12.1",sdk_name:"SDK_SLARDAR_WEB",context:{}}}return e.prototype.init=function(e){var t,n,o,i,r=e.commonOptions||e,s=(null===(n=null===(t=e.captchaOptions)||void 0===t?void 0:t.logConfig)||void 0===n?void 0:n.domain)||"mon.zijieapi.com",a=null==r?void 0:r.aid,c=null==r?void 0:r.did,l=null==r?void 0:r.scene_level,u=String((null==r?void 0:r.repoId)||"0"),d=String((null==r?void 0:r.pageId)||"0");this.reportUrl="https://".concat(s,"/monitor_browser/collect/batch/"),this.commonParams.release=null===(o=e.captchaOptions)||void 0===o?void 0:o.h5_check_version,this.commonParams.device_id=c?String(c):"0",this.commonParams.context={belong:"vc",vc_version:"1.0.0.177",appId:a?String(a):"unknown",scene_level:l,repoId:u,pageId:d,bizIsGray:(null===(i=window.gfdatav1)||void 0===i?void 0:i.canary)?"1":"0"}},e.prototype.setFp=function(e){this.commonParams.user_id=e},e.prototype.setContext=function(e,t){t&&(this.commonParams.context[e]=t)},e.prototype._report=function(e){try{if(this.reportUrl&&e.length>0){var t=new XMLHttpRequest;t.open("POST",this.reportUrl,!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({ev_type:"batch",list:e})),e.length=0}}catch(e){console.error("[vc slardar._report]",e)}},e.prototype.report=function(e,t,n){var o=this;try{if(!this.shouldReport[e]){return}var i=JSON.parse(JSON.stringify(this.commonParams));if(i.timestamp=+new Date,i.context.mark=n,"custom"===e){var r=t,s=r.content;"object"==typeof s&&(r.content=JSON.stringify(s)),r.categories&&"captchaRender"===r.name&&(r.categories=function(e){if(Math.random()>.5){return{}}var t={theme:e.theme?"true":"false"},n={aid:!0,did:!0,iid:!0,fp:!0,verify_data:!0,theme:!0},o=e.theme||{};for(var i in e){n[i]||"function"==typeof e[i]||o[i]||(t[i]="object"==typeof e[i]?JSON.stringify(e[i]):String(e[i]))}return t}(r.categories))}t.mustReport||1===this.shouldReport[e]?this.lists.push({ev_type:e,payload:t,common:i}):(this.bufferList.push({ev_type:e,payload:t,common:i}),this.bufferList.length>15&&this.bufferList.shift()),t.mustReport=void 0,clearTimeout(this.timeout),this.timeout=setTimeout((function(){o._report(o.lists)}))}catch(e){console.error("[vc slardar.report]",e)}},e.prototype.reportBufferList=function(){this._report(this.bufferList)},e}(),R="turing_verify_sdk",B=function(){function e(e){var t=this;this.loseEvents=[],this.loadScript=function(e){if(window.verifyCenterTea){return o.Promise.resolve(0)}var n=["lf-cdn-tos.bytescm.com","lf-rc1.yhgfb-cn-static.com"];e&&(n[1]=e);var i=function(e){return t._loadScript(e.pop()).catch((function(t){return 0===e.length?o.Promise.reject(t):i(e)}))};return i(n).then((function(e){t.slardar.report("resource",e,"collect-load")})).catch((function(e){return t.slardar.report("resource_error",e,"collect-load"),o.Promise.reject("[captcha sdk] load collect-base.js error")}))},this._loadScript=function(e){var t=document.getElementsByTagName("head")[0];return new o.Promise((function(n,o){var i="https://".concat(e,"/obj/rc-verifycenter/verifycenter-collect/1.0.0.7-5.1.16/collect-base.js"),r=document.createElement("script");r.src=i,r.async=!0;var s=Date.now();r.onload=function(){n({name:i,entryType:"resource",startTime:s,duration:Date.now()-s})},r.onerror=function(){o({type:"script",url:i})},t.appendChild(r)}))},this.init=function(e){return s(t,void 0,void 0,(function(){var t,n,o,i,r,s,c,l,u,d,p,f,h,v;return a(this,(function(a){switch(a.label){case 0:if(window.verifyCenterTea){return[3,4]}t=(null===(d=e.captchaOptions)||void 0===d?void 0:d.trackConfig)||{},n=(null===(p=e.captchaOptions)||void 0===p?void 0:p.hostConfig)||{},a.label=1;case 1:return a.trys.push([1,3,,4]),this.slardar.init(e),[4,this.loadScript(null==n?void 0:n.static_domain)];case 2:return a.sent(),o={app_id:2018,channel:"cn"},t.channel_domain&&(o.channel_domain=t.channel_domain),window.verifyCenterTea.init(o),i=e.commonOptions||e,r=null===(f=e.captchaOptions)||void 0===f?void 0:f.disableFrameMode,s=window.gfdatav1&&0!==window.gfdatav1.canary?1:0,c={_staging_flag:0,evtParams:{h5_check_version:null===(h=e.captchaOptions)||void 0===h?void 0:h.h5_check_version,vc_version:"1.0.0.177",aid:null==i?void 0:i.aid,fp:this.fp,product_host:window.location.host,product_path:window.location.pathname,scene_level:null==i?void 0:i.scene_level,usage_gray:s,noFrame:r?1:0}},(l=(null===(v=e.commonOptions)||void 0===v?void 0:v.did)||e.did)&&"0"!=l?c.user_unique_id=l:this.fp&&(c.user_unique_id=this.fp),window.verifyCenterTea.config(c),window.verifyCenterTea.start(),this.loseEvents.forEach((function(e){"event"===e[0]&&window.verifyCenterTea.event(R,e[1]),"config"===e[0]&&window.verifyCenterTea.config(e[1])})),this.loseEvents=[],[3,4];case 3:return u=a.sent(),console.error(u),[3,4];case 4:return[2]}}))}))},this.setFp=function(e){t.fp=e,t.slardar.setFp(e),window.verifyCenterTea&&window.verifyCenterTea.config({user_unique_id:e})},this.fp=e.getFp(),this.slardar=new j(this.fp)}return e.prototype.setParam=function(e,t){var n,o;window.verifyCenterTea?window.verifyCenterTea.config({evtParams:(o={},o[e]=t,o)}):this.loseEvents.unshift(["config",{evtParams:(n={},n[e]=t,n)}])},e.prototype.trackEvent=function(e,t){var n=i({key:"h5_"+e},t);if(window.verifyCenterTea){try{window.verifyCenterTea.event(R,n)}catch(e){}}else{this.loseEvents.push(["event",n])}},e.prototype.log=function(e){try{if("h5_feedback"===e.key&&(this.slardar.report("custom",{mustReport:!0,name:"feedback",type:"event",categories:{option:e.option},content:JSON.stringify(e)}),this.slardar.reportBufferList()),!window.verifyCenterTea){return void this.loseEvents.push(["event",e])}window.verifyCenterTea.event(R,e)}catch(e){console.error(e)}},e}(),F=function(){var e=this;this.loadScript=function(){var e=document.getElementsByTagName("head")[0];return new o.Promise((function(t,n){var o=document.createElement("script");o.src="https://lf-cdn-tos.bytescm.com/obj/rc-verifycenter/second-valid-web/1.3.2/index.js",o.async=!0,o.onload=function(){t(0)},o.onerror=function(){n()},e.appendChild(o)}))},this.show=function(t){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadScript()];case 1:return e.sent(),new window.AccountSecondVerifySDK(t).render(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))}},I=function(e,t,n,i){var r=function(t){return(s=t.pop(),new o.Promise((function(t,o){var r=document.getElementsByTagName("head")[0],a=document.createElement("script"),c=Date.now();a.src="https://".concat(s).concat(n),a.async=!0,a.onload=function(){e.slardar.report("resource",{name:a.src,entryType:"resource",startTime:c,duration:Date.now()-c},i),t(0)},a.onerror=function(){e.slardar.report("resource_error",{type:"script",url:a.src},i),o(new Error(i))},r.appendChild(a)}))).catch((function(e){return 0===t.length?o.Promise.reject(e):r(t)}));var s};return r(t)},P=function(e){var t=this;this.loadScript=function(){return window["@byted/uc-account-second-verification-web"]?o.Promise.resolve(0):I(t.myLogger,m,"/obj/passport-fe/ucenter_fe/@byted/uc-account-second-verification-web/1.0.16/dist/index.umd.production.js","second-valid-load")},this.show=function(e){return s(t,void 0,void 0,(function(){var t,n,o,i,r,s;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.loadScript()];case 1:return a.sent(),(t=window["@byted/uc-account-second-verification-web"].default).init({aid:e.aid,useSixCode:e.useSixCode,generalParams:e.generalParams,newSecondVerifyWebOptions:e.newSecondVerifyWebOptions}),[4,t.verify(e.decision)];case 2:return a.sent().status?(null===(i=e.callBack)||void 0===i||i.call(e),this.myLogger.trackEvent("uc_verify_result",{mode:e.subtype,is_success:1})):(null===(r=e.closeCallBack)||void 0===r||r.call(e),this.myLogger.trackEvent("uc_verify_result",{mode:e.subtype,is_success:0})),[3,4];case 3:return n=a.sent(),null===(s=e.closeCallBack)||void 0===s||s.call(e),o=(null==n?void 0:n.message)||"验证码渲染失败",this.myLogger.slardar.report("blank_screen",{mustReport:!0,score:0,timestamp:Date.now(),error:{type:"second-valid-load"==o?"resource_error":"js_error",message:JSON.stringify({message:o,stack:null==n?void 0:n.stack})}},"second-valid-render-fail"),[3,4];case 4:return[2]}}))}))},this.myLogger=e},V=function(e){var t=e.url,n=e.method,i=e.data,r=e.config;return new o.Promise((function(e,o){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===s.DONE){if(s.status>=200&&s.status<300){var t={},n=s.response||s.responseText,i=s.getResponseHeader("Content-Type")||s.getResponseHeader("content-type");if(i&&-1!==i.indexOf("application/json")){try{t=JSON.parse(n)}catch(e){}}else{t=n}setTimeout((function(){e(t)}),0)}else{o(new TypeError("Network request failed, status: ".concat(s.status)))}}},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed, occur error"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed, timeout"))}),0)},s.onabort=function(){setTimeout((function(){o(new DOMException("Aborted","AbortError"))}),0)};var a=t;if((null==r?void 0:r.params)&&(a="".concat(a,"?").concat(b(r.params))),s.open(n,a,!0),(null==r?void 0:r.timeout)&&"number"==typeof r.timeout?s.timeout=r.timeout:s.timeout=5e3,null==r?void 0:r.headers){for(var c=r.headers,l=0,u=Object.keys(c);l<u.length;l++){var d=u[l];s.setRequestHeader(d,c[d])}}(null==r?void 0:r.withCredentials)&&(s.withCredentials=r.withCredentials),"POST"===n.toUpperCase()&&i?s.send(JSON.stringify(i)):s.send(null)}))},D=function(e,t,n){void 0===n&&(n={});var o=n.headers?i({"Content-Type":"application/json"},n.headers):{"Content-Type":"application/json"};return V({url:e,method:"POST",data:t,config:i(i({},n),{headers:o})})},M=function(e,t){var n=this;this.loadScript=function(){return window.bdHuoti?o.Promise.resolve(0):I(n.myLogger,h,"/obj/rc-verifycenter/rmc-huoti-verify/1.0.0.29/huoti.js","huoti_verify")},this.show=function(e,t){return s(n,void 0,void 0,(function(){var n,o,i;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=_(e.ele),this.loading.show(n),[4,this.loadScript()];case 1:return r.sent(),this.loading.close(),(o=new window.bdHuoti.HuotiVerify(e)).init(),o.render(t),[3,3];case 2:return i=r.sent(),console.log(i),this.loading.close(),[3,3];case 3:return[2]}}))}))},this.myLogger=e,this.loading=t},N=function(){function e(){var e=this;this.show=function(t){var n,o,i,r,s,a,c,l=null===(o=null===(n=e.verifyOption)||void 0===n?void 0:n.commonOptions)||void 0===o?void 0:o.aid,u=null===(r=null===(i=e.verifyOption)||void 0===i?void 0:i.captchaOptions)||void 0===r?void 0:r.h5_check_version;if(2079==l&&u&&function(e,t){for(var n=e.split("."),o=t.split("."),i=n.length,r=o.length,s=Math.min(i,r),a=0;a<s;a++){var c=parseInt(n[a]),l=parseInt(o[a]);if(c>l){return 1}if(c<l){return-1}}if(i>r){for(var u=a;u<i;u++){if(0!=parseInt(n[u])){return 1}}return 0}if(i<r){for(u=a;u<r;u++){if(0!=parseInt(o[u])){return-1}}return 0}return 0}(u,"4.0.11")>=0){var d=document.createElement("div");d.id="vc_loading",t.appendChild(d),e.container=d;var p=document.getElementsByTagName("head")[0],f=document.createElement("style");f.textContent="\n            @keyframes verifyCenterRoll {\n              to {\n                transform: rotate(360deg);\n              }\n            }\n        ",p.appendChild(f),d.innerHTML='\n            <div style="width: 370px; height: 194px; background: rgb(34, 34, 34); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.2); display: flex; justify-content: center; align-items: center; flex-direction: column;">\n                <img style="animation: verifyCenterRoll 1s linear infinite;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgB7Za7bhNBFIZ/O8GWuAgIIIEooKDgJpAIT8AL0EBBQcsLUNHQ8AI01EjUUCAoqMgTpEuTSFYSKYpyVazEudlJnO9ox/HsKsnuOps4xfzSr7Pyzpzz7VwtBQUVq5J6ULvdvkC4ge/ja/g2HsT2+zpewlN4slQqbSqnckE5mAf4Eb7kICopcRT/A245a53MUADdIzzEF10xG5mqe646iEoCqvNsHsG/gdtIq5UKBYwVf4pvegX8olUvJuGSYHX8BbDFnqEAqjggm6oBxUfBCszhBdyg0LbrY+vrLn6OXySgzCv4M+0XeoWy6bqs7nRZgS08TtIlpYj+thle41deDrOtr0/kmM8FRcJbhDu4rO7Osq+bJtmOcohcbwjvPDAb9THyfDysffmIJNbxOm7hHWeDqeUFMtHnJ+GbB2VxmDpvM0N5QE0X6ySe1QlE//+EP4qvsQ+AXUmFotGA69DywGZUjH4oOlg7m2UIv1QalKJt7QPVe5myw0SeBuGX4qP1Xhmg5GA6bqhY/cXbHtgzZYBqqztKTb6upQJFvjVCTd3Ddogl8zgN6gBI0Zl0GppQ/EB94r8cTLYuav2kyO4/GyWbFTsry8dCnZE6V5bJwM4FlF0/PlTsyOkX1LCi6dtTBLWqfovdNo6beBfXku/L6o++Klrs9lf5u86LGKGrZgUFBQUFBQVpH4tinQxBmYkAAAAAAElFTkSuQmCC" />\n                <div style="font-size: 16px; color: rgba(255, 255, 255, 0.6); margin-top: 12px;">防挂机检测加载中，请耐心等待</div>\n            </div>\n        ',null===(c=null===(a=null===(s=e.verifyOption)||void 0===s?void 0:s.captchaOptions)||void 0===a?void 0:a.onResize)||void 0===c||c.call(a,{w:370,h:194})}},this.close=function(){var t;e.container&&(null===(t=e.container.parentElement)||void 0===t||t.removeChild(e.container))}}return e.prototype.init=function(e){this.verifyOption=e},e}(),U=function(){function e(e,t){var n=this;this.init=function(e){void 0===e&&(e={});var t=e.commonOptions||e;t&&(t.scene_level=t.scene_level||"p2"),n.myLogger.init(e),n.loadding.init(e),n.myOptions.setOptions(e);var o=e.captchaOptions;(null==o?void 0:o.fpCookieOption)&&(n.myFp.setCookieOption(o.fpCookieOption),w(o.fpCookieOption)&&n.myFp.setFpToCookie(n.myFp.getFp()))},this.renderCaptcha=function(e){return s(n,void 0,void 0,(function(){var t,n,o,s,c,l,u,d,p,f,h,v,m,y,b,w,C,O;return a(this,(function(a){if(this.isRender){return t=e.captchaOptions,o=(n=e).successCb,s=n.closeCb,o||s?this.myOptions.setCallback(o,s):t&&this.myOptions.setCallback(t.successCb,t.closeCb),[2]}if(e.aid?c=e:(l=this.myOptions.options,u=l.commonOptions,d=void 0===u?{}:u,p=l.captchaOptions,f=void 0===p?{}:p,h=r(l,["commonOptions","captchaOptions"]),m=(v=e).commonOptions,y=v.captchaOptions,b=r(v,["commonOptions","captchaOptions"]),c=i(i(i(i(i(i({},h),d),f),m),y),b)),this.myLogger.slardar.setContext("appId",String(c.aid)),c.did&&(this.myLogger.slardar.commonParams.device_id=String(c.did)),function(e){if(void 0===e&&(e={}),"[object Object]"!==Object.prototype.toString.call(e)){throw console.error("Options must be an object"),new Error("Options must be an object")}if("number"!=typeof e.aid){throw new Error("The parameter aid is required and of type int")}}(c),g(c),w=c.scene_level,this.myLogger.slardar.setContext("scene_level",w),this.myLogger.setParam("scene_level",w),this.myLogger.slardar.report("custom",{name:"captchaRender",type:"event",categories:c,content:""}),this.myOptions.setCaptchaOptions(c),c.fp&&this.myFp.setOptionFp(c.fp),c.fpCookieOption&&this.myFp.setCookieOption(c.fpCookieOption),c.verify_data){C=c.verify_data;try{(O="string"==typeof C?JSON.parse(C):C).log_id&&this.myLogger.setParam("shark_log_id",O.log_id),this.myLogger.slardar.setContext("scene",O.verify_scene),this.myLogger.setParam("is_decision",1),(O.fp||O.Fp)&&(this.myFp.getOrSetFp(O.fp||O.Fp),this.myLogger.setFp(O.fp)),c.verifyData=O}catch(e){}}this.myLogger.trackEvent("init",{stage:"verifycenterRender"}),this.isRender=!0,this.myIframe.show({root:_(c.ele),props:{myFp:this.myFp,myOption:this.myOptions,myLogger:this.myLogger,loading:this.loadding}});try{Math.random()}catch(e){}return[2]}))}))},this.renderSecondVerifyWeb=function(e){return s(n,void 0,void 0,(function(){var t,n,o,r;return a(this,(function(s){return t=e.commonOptions,n=e.verify_data,o=e.secondVerifyWebOptions,r=i(i(i(i(i({},this.myOptions.options.commonOptions),this.myOptions.options.secondVerifyWebOptions),t),o),{postPc:n.subtype||"mobile_sms_verify",fp:this.myFp.getFp()}),"mobile_sms_verify"===n.subtype||"mobile_up_sms_verify"===n.subtype||"mobile_voice_sms_verify"===n.subtype?r.account=n.mobile:"email_verify"===n.subtype?r.account=n.email:"mobile_sms_check_or_verify"===n.subtype&&(r.origin_decision=n.detail,r.is_login=n.login_status),n.verify_ticket&&(r.commonParams={verify_ticket:n.verify_ticket}),n.channel_mobile&&n.sms_content&&(r.channel_mobile=n.channel_mobile,r.sms_content=n.sms_content),function(e){if(void 0===e&&(e={}),"[object Object]"!==Object.prototype.toString.call(e)){throw console.error("Options must be an object"),new Error("Options must be an object")}if("number"!=typeof e.aid){throw new Error("The parameter aid is required and of type int")}}(r),(new F).show(r),this.myLogger.trackEvent("init",{stage:"vcSecondValidRender"}),[2]}))}))},this.renderUcSecondValid=function(e){var t=i(i({},n.myOptions.options.secondVerifyWebOptions),e.secondVerifyWebOptions),o=i(i({},n.myOptions.options.commonOptions),e.commonOptions),r=e.verify_data,s={};o.did&&"0"!==o.did&&(s.device_id=o.did);var a={aid:o.aid,useSixCode:6===t.useSmsMode,newSecondVerifyWebOptions:{host:t.host,disableClose:!!t.hideCloseBtn},generalParams:i(i({},s),t.generalParams),subtype:r.subtype,callBack:t.callBack,closeCallBack:t.closeCallBack};if(r.mfa_decision){try{a.decision=JSON.parse(r.mfa_decision)}catch(e){}}"mobile_sms_check_or_verify"===r.subtype&&(a.decision=i(i({},a.decision),{verify_ways:"mobile_sms_check_or_verify",verify_from:"verify_center",scene:"engineType",origin_decision:r.detail,is_login:r.login_status,fp:n.myFp.getFp()})),new P(n.myLogger).show(a),n.myLogger.trackEvent("init",{stage:"ucSecondValidRender"})},this.autoRender=function(e){var t=e.verify_data,o=e.commonOptions,s=e.captchaOptions,a=e.secondVerifyWebOptions,c=r(e,["verify_data","commonOptions","captchaOptions","secondVerifyWebOptions"]);if(e.verify_data){try{var l="string"==typeof t?JSON.parse(t):t;1e4==+l.code?n.renderCaptcha(i(i({},c),{commonOptions:o,captchaOptions:s,verify_data:l})):2e4==+l.code?l.mfa_decision?n.renderUcSecondValid({commonOptions:o,secondVerifyWebOptions:a,verify_data:l}):n.renderSecondVerifyWeb({commonOptions:o,secondVerifyWebOptions:a,verify_data:l}):4e4==+l.code&&n.renderHuotiVerify({commonOptions:o,captchaOptions:s,verify_data:l})}catch(e){throw new Error("The parameter verify_data is required")}}},this.closeCaptcha=function(){var e;if(n.isRender=!1,null===(e=n.myOptions.captchaOptions)||void 0===e?void 0:e.ele){var t=document.getElementById(n.myOptions.captchaOptions.ele);t&&(document.body.classList&&document.body.classList.remove&&document.body.classList.remove("captcha-disable-scroll"),t.style.display="none")}},this.myOptions=e,this.myFp=t,this.myLogger=new B(t),this.myIframe=new T(this),this.isRender=!1,this.loadding=new N}return e.prototype.renderHuotiVerify=function(e){var t=i(i({},this.myOptions.options.commonOptions),e.commonOptions),n=i(i({},this.myOptions.options.captchaOptions),e.captchaOptions);g(n),new M(this.myLogger,this.loadding).show({info:{aid:t.aid,did:t.did,iid:t.iid,appName:n.app_name,lang:n.lang,fp:n.fp,repoId:t.repoId,pageId:t.pageId},ele:n.ele,env:{h5_check_version:n.h5_check_version},successCb:n.successCb,closeCb:n.closeCb,getUserMedia:n.getUserMedia,getMediaDevices:n.getMediaDevices,closeUserMedia:n.closeUserMedia,onResize:function(e){var t;null===(t=n.onResize)||void 0===t||t.call(n,e)}},JSON.stringify(e.verify_data))},e}();!function(e){e[e.captcha=1]="captcha",e[e.secondVerify=2]="secondVerify"}(S||(S={}));var W=function(){function e(e,t,n){this.myOptions=e,this.myVerify=t,e.options.smsOptions&&(this.sms=new n(e.options))}return e.prototype.render=function(e){var t=this,n=this.myOptions.options,o=n.commonOptions,r=n.captchaOptions,s=n.secondVerifyWebOptions;this.myVerify.autoRender({commonOptions:o,captchaOptions:i(i({},r),{successCb:function(e){var n,o;null===(n=null==r?void 0:r.successCb)||void 0===n||n.call(r,e),null===(o=t.onsuccess)||void 0===o||o.call(t,e,S.captcha)},closeCb:function(){var e,n;null===(e=null==r?void 0:r.closeCb)||void 0===e||e.call(r),null===(n=t.onclose)||void 0===n||n.call(t,S.captcha)}}),secondVerifyWebOptions:i(i({},s),{callBack:function(e){var n,o;null===(n=null==s?void 0:s.callBack)||void 0===n||n.call(s,e),null===(o=t.onsuccess)||void 0===o||o.call(t,e,S.secondVerify)},closeCallBack:function(){var e,n;null===(e=null==s?void 0:s.closeCallBack)||void 0===e||e.call(s),null===(n=t.onclose)||void 0===n||n.call(t,S.captcha)}}),verify_data:e})},e.prototype.getFp=function(){var e;return(null===(e=this.myOptions.captchaOptions)||void 0===e?void 0:e.fp)||this.myVerify.myFp.getFp()},e}(),z=function(e){var t=this;this.host="",this.setHost=function(e){t.host=e},this.handler=function(e){return 0===e.code?e:o.Promise.reject(e)},this.sendCode=function(e,n){return void 0===n&&(n={}),s(t,void 0,void 0,(function(){return a(this,(function(t){return[2,D("".concat(this.host).concat(d),e,{params:n}).then(this.handler)]}))}))},this.validateCode=function(e){return s(t,void 0,void 0,(function(){return a(this,(function(t){return[2,D("".concat(this.host).concat(p),e).then(this.handler)]}))}))},e&&("/"===e.slice(-1)&&(e=e.slice(0,-1)),this.host=e)},q=new L,H=new E,J=new U(q,H),Q=function(e,t){return function(){function n(t){var n;this.myRequest=new z,this.options=i(i({},t),e.options),(null===(n=this.options.smsOptions)||void 0===n?void 0:n.host)&&this.myRequest.setHost(this.options.smsOptions.host)}return n.prototype.sendCode=function(e,n){var r=e.mobile;return s(this,void 0,void 0,(function(){var e,c,l,u,d,p,f,h,v,m,y,g,b,w,_,C,O,k,S=this;return a(this,(function(E){switch(E.label){case 0:e=this.options,c=e.commonOptions,l=e.smsOptions,u=e.captchaOptions,d=e.secondVerifyWebOptions,p=Object.assign(i({app_id:c.aid},l),n),f=p.app_id,h=p.channel_id,v=p.scene,m=p.code_type,y=p.language,g=p.event_type,b=p.uid,w=p.template_id,E.label=1;case 1:return E.trys.push([1,4,,5]),[4,t.myFp.getFp()];case 2:return _=E.sent(),[4,this.myRequest.sendCode({mobile:r,app_id:f,channel_id:h,scene:v,code_type:m,language:y,event_type:g,uid:b,template_id:w,verifyFp:_,fp:_},{verifyFp:_,fp:_})];case 3:return C=E.sent(),"PASS"===(O=C.data).decision?[2,C]:[2,new o.Promise((function(e,o){var l=function(){return s(S,void 0,void 0,(function(){var t,i;return a(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.sendCode({mobile:r},n)];case 1:return t=s.sent(),e(t),[3,3];case 2:return i=s.sent(),o(i),[3,3];case 3:return[2]}}))}))};t.autoRender({verify_data:O.decision,commonOptions:c,captchaOptions:i(i({},u),{autoClose:!0,successCb:function(){return s(S,void 0,void 0,(function(){return a(this,(function(e){return"function"==typeof(null==u?void 0:u.successCb)&&u.successCb("success"),l(),[2]}))}))},closeCb:function(){o(C)}}),secondVerifyWebOptions:i(i({},d),{callBack:function(){l()},closeCallBack:function(){o(C)}})})}))];case 4:return k=E.sent(),[2,o.Promise.reject(k)];case 5:return[2]}}))}))},n.prototype.validateCode=function(e,t){var n=e.mobile,o=e.code;return s(this,void 0,void 0,(function(){var e,r,s,c,l,u;return a(this,(function(a){return e=this.options,r=e.commonOptions,s=e.smsOptions,c=Object.assign(i({app_id:r.aid},s),t),l=c.app_id,u=c.scene,[2,this.myRequest.validateCode({mobile:n,app_id:l,scene:u,code:o})]}))}))},n}()}(q,J),G=function(e){var t=new L,n=new E;t.setOptions(e);var o=new U(t,n);return o.init(e),o},K=window.getCaptchaWebId=H.getOrSetFp,X=window.initVerifyOptions=J.init,Y=window.renderCaptcha=J.renderCaptcha,Z=window.autoRender=J.autoRender,$=window.renderSecondVerifyWeb=J.renderSecondVerifyWeb,ee=window.SMS=Q,te=window.initVerifyCenter=function(e){var t=new L;return t.setOptions(e),new W(t,J,Q)},ne=window.closeCaptcha=J.closeCaptcha,oe=G,ie=J.renderCaptcha;window.verifySDK={renderCaptcha:Y,closeCaptcha:ne,getCaptchaWebId:K,initVerifyOptions:X,renderSecondVerifyWeb:$,autoRender:Z,SMS:ee,initVerifyCenter:te,init:G,log:function(e){return J.myLogger.log(e)}},window.renderCaptcha&&"function"==typeof window.renderCaptcha.trigger&&window.renderCaptcha.trigger(J.renderCaptcha),"function"==typeof window.mountCaptchaCallback&&window.mountCaptchaCallback(),e.SMS=ee,e.autoRender=Z,e.closeCaptcha=ne,e.default=ie,e.getCaptchaWebId=K,e.init=oe,e.initVerifyCenter=te,e.initVerifyOptions=X,e.renderCaptcha=Y,e.renderSecondVerifyWeb=$,Object.defineProperty(e,"__esModule",{value:!0})}));