(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1382:function(t,e,n){},1383:function(t,e,n){},2070:function(t,e,n){n(10);var o=n(160),l=n(204);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),r=e.children,v=void 0===r?[]:r,f=data.class,m=data.staticClass,style=data.style,d=data.staticStyle,_=data.attrs,O=void 0===_?{}:_,h=l(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,d],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},O)},h),v.concat([n("circle",{attrs:{cx:"12",cy:"12",r:"11.4",transform:"matrix(-1 0 0 1 24 0)",fill:"white",stroke:"#C2C8D1","stroke-width":"1.2"}}),n("path",{attrs:{d:"M14 8.83122C14 8.40501 13.5009 8.17422 13.1762 8.45025L9.4482 11.619C9.2133 11.8187 9.2133 12.1813 9.4482 12.381L13.1762 15.5497C13.5009 15.8258 14 15.595 14 15.1688V8.83122Z",fill:"#515767"}})]))}}},2071:function(t,e,n){n(10);var o=n(160),l=n(204);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),r=e.children,v=void 0===r?[]:r,f=data.class,m=data.staticClass,style=data.style,d=data.staticStyle,_=data.attrs,O=void 0===_?{}:_,h=l(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,d],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},O)},h),v.concat([n("circle",{attrs:{cx:"12",cy:"12",r:"11.4",fill:"white",stroke:"#C2C8D1","stroke-width":"1.2"}}),n("path",{attrs:{d:"M10 8.83122C10 8.40501 10.4991 8.17422 10.8238 8.45025L14.5518 11.619C14.7867 11.8187 14.7867 12.1813 14.5518 12.381L10.8238 15.5497C10.4991 15.8258 10 15.595 10 15.1688V8.83122Z",fill:"#515767"}})]))}}},2072:function(t,e,n){"use strict";n(1382)},2073:function(t,e,n){"use strict";n(1383)},2424:function(t,e,n){"use strict";n.r(e);var o=n(3),l=n(2070),c=n.n(l),r=n(2071),v=n.n(r),f=(n(10),n(60),n(23),n(79),n(8),n(0)),m=(n(18),n(5)),d=n(94),_=n(6),content=n(1303),O=n(116),h=n(143),j=n(381),w=n(1144),C=n(1069),y=n(178),x=n(308),I=n(58),P=n(120),k=n(40);function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function A(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object(f.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S=Object(o.b)({components:{BButton:d.Button,JButton:C.a,Thumb:h.a,ColumnCatalogList:function(){return n.e(55).then(n.bind(null,2453))}},props:{column_item:{type:Object,required:!0},rank:{type:Number,required:!0}},setup:function(t,e){var n;Object(o.h)((function(){var t=e.root.$getBean("eventBus");t.on(t.eventType.ROOT_CONTAINER_CLICK,(function(){f.value=!1})),V()}));var l=Object(o.r)(),c=Object(o.l)("0"),r=Object(o.l)(!0),v=Object(o.l)([]),f=Object(o.l)(!1),d=Object(o.l)(!1),h=Object(o.a)((function(){return t.column_item.column_info})),C=Object(o.a)((function(){var e;return null!==(e=t.column_item.next_article_info)&&void 0!==e?e:{}})),L=Object(o.a)((function(){var e;return null!==(e=t.column_item.prev_article_info)&&void 0!==e?e:{}})),S=Object(o.a)((function(){return Object(x.b)(h.value.column.follow_cnt)})),D=Object(o.a)((function(){return Object(x.b)(h.value.column.article_cnt)})),E=Object(o.a)((function(){return h.value.column_id})),T=Object(o.l)(null===(n=h.value)||void 0===n?void 0:n.is_follow),R=Object(o.l)(!1);Object(o.s)(E,(function(){!function(){var t;c.value="0",r.value=!0,v.value=[],f.value=!1,d.value=!1,T.value=null===(t=h.value)||void 0===t?void 0:t.is_follow}()}));var B=Object(o.a)((function(){return e.root.$device.isMobile})),F=Object(o.a)((function(){return M.value&&B.value})),M=Object(o.a)((function(){return e.root.$store.state.auth.user&&e.root.$store.state.auth.user.user_id===h.value.author.user_id})),N=l.state.view.column,$=function(){var t=Object(m.a)(regeneratorRuntime.mark((function t(n,o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),n.preventDefault(),t.prev=2,t.next=5,e.root.$ensureAuthorized();case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return");case 10:R.value=!0,c=(c=N.columnList).map((function(t){return t.column_info.column_id===E.value?A(A({},t),{},{column_info:A(A({},t.column_info),{},{is_follow:o})}):t})),o?Object(O.a)({id:E.value,type:24}).then((function(t){Object(y.a)(t.err_no)||(T.value=o,l.commit("view/column/UPDATE_STATE",{columnList:c}))})).finally((function(){R.value=!1})):Object(O.d)({id:E.value,type:24}).then((function(){T.value=o,l.commit("view/column/UPDATE_STATE",{columnList:c})})).finally((function(){R.value=!1}));case 14:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}(),V=function(){if(E.value&&"0"!==E.value&&("0"===c.value||r.value))return d.value=!0,Object(content.a)({column_id:E.value,cursor:c.value,limit:20,sort:0}).then((function(t){var e=t.data,data=void 0===e?[]:e,cursor=t.cursor,n=t.has_more;v.value=(v.value||[]).concat(data),c.value=cursor,r.value=n})).finally((function(){d.value=!1}))},z=Object(P.b)((function(){return V()}),1e3);return{handleColumnVisible:function(e){if(e){Object(k.d)("column_entrance_display",{cloumn_id:E.value,rank:t.rank,column_location:w.a.articleEnd});var n=["item_display","item_display_for_creator"];L.value.article_id&&n.forEach((function(t){Object(k.d)(t,{event_page:I.a.columnPrevArticle,from_seo:Object(j.b)(),item_type:_.IdType.ArticleIdType,item_id:L.value.article_id,rank:1})})),C.value.article_id&&n.forEach((function(t){Object(k.d)(t,{event_page:I.a.columnNextArticle,from_seo:Object(j.b)(),item_type:_.IdType.ArticleIdType,item_id:C.value.article_id,rank:2})}))}},columnInfo:h,nextArticleInfo:C,prevArticleInfo:L,isFollow:T,catalogList:v,handleFollowChange:$,handleColumnRoute:function(){Object(k.d)("column_entrance_click",{column_id:E.value,column_location:w.a.articleEnd,rank:t.rank});var e="/column/".concat(h.value.column_id);window.open(e,"_blank")},enterPost:function(t,e){switch(e){case"prev":localStorage.setItem("fromPage","columnPrevArticle");break;case"next":localStorage.setItem("fromPage","columnNextArticle")}Object(k.d)("item_click",{event_page:{prev:I.a.columnPrevArticle,next:I.a.columnNextArticle}[e],from_seo:Object(j.b)(),item_type:_.IdType.ArticleIdType,item_id:t.article_id,rank:{prev:1,next:2}[e]});var n="/post/".concat(t.article_id);window.open(n,"_blank")},fetchCatalog:V,onShouldFetchMore:z,handleShowColumnList:function(){d.value||(f.value||v.value.length?!f.value&&v.value.length?f.value=!0:f.value=!1:(f.value=!0,V()))},showColumnList:f,isSelf:M,showLoading:R,isMobile:B,isSelfMobile:F,followCount:S,articleCount:D}}}),D=(n(2072),n(29)),E=Object(D.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.visible.once",value:t.handleColumnVisible,expression:"handleColumnVisible",modifiers:{visible:!0,once:!0}}],staticClass:"item-container",on:{click:t.handleColumnRoute}},[n("div",{staticClass:"main"},[n("Thumb",{staticClass:"thumb",attrs:{url:t.columnInfo.column_version.cover,lazy:!1,width:80,height:60,alt:"cover"}}),t._v(" "),n("div",{staticClass:"content",class:{"content-expand":t.isSelfMobile}},[n("div",{staticClass:"title-container"},[t.columnInfo.column_version.title&&t.columnInfo.column_version.title.length>22?n("div",{staticClass:"tooltip",attrs:{placement:"top-start","max-width":"472px",content:t.columnInfo.column_version.title||""}},[n("span",{staticClass:"title"},[t._v("\n            "+t._s(t.columnInfo.column_version.title||"")+"\n          ")])]):n("div",{staticClass:"title"},[t._v("\n          "+t._s(t.columnInfo.column_version.title||"")+"\n        ")]),t._v(" "),n("div",{staticClass:"catalog",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleShowColumnList(e)}}},[t._v("\n          专栏目录\n          "),t.showColumnList&&t.catalogList.length?n("ColumnCatalogList",{staticClass:"column-list",attrs:{list:t.catalogList,"column-id":t.columnInfo.column_version.column_id,title:t.columnInfo.column_version.title},on:{"should-fetch-more":t.onShouldFetchMore}}):t._e()],1)]),t._v(" "),t.columnInfo.column_version.content&&t.columnInfo.column_version.content.length>27?n("div",{staticClass:"tooltip",attrs:{placement:"top-start","max-width":"472px",content:t.columnInfo.column_version.content||""}},[n("span",{staticClass:"description"},[t._v("\n          "+t._s(t.columnInfo.column_version.content||"")+"\n        ")])]):n("div",{staticClass:"description"},[t._v("\n        "+t._s(t.columnInfo.column_version.content||"")+"\n      ")]),t._v(" "),n("div",{staticClass:"column-detail"},[n("div",{staticClass:"follow-number"},[t._v(t._s(t.followCount)+" 订阅")]),t._v(" "),n("div",{staticClass:"dot"},[t._v("·")]),t._v(" "),n("div",{staticClass:"article-number"},[t._v(t._s(t.articleCount)+" 篇文章")])])]),t._v(" "),t.isSelf?n("b-button",{staticClass:"btn cancel-btn",attrs:{type:"text"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleColumnRoute(e)}}},[t._v("\n      进入专栏\n    ")]):t._e(),t._v(" "),t.isSelf?t._e():n("j-button",{staticClass:"btn follow-btn",class:{followed:t.isFollow},attrs:{size:"mini",attention:!0,cancel:t.isFollow,"custom-attention-text":"订阅","cancel-attention-text":"已订阅",loading:t.showLoading},on:{click:function(e){return t.handleFollowChange(e,!t.isFollow)}}})],1),t._v(" "),n("div",{staticClass:"divide"}),t._v(" "),n("div",{staticClass:"related-article"},[t.prevArticleInfo.title?n("div",{staticClass:"prev-article"},[n("div",{staticClass:"prev"},[t._v("上一篇")]),t._v(" "),n("div",{staticClass:"title",on:{click:function(e){return e.stopPropagation(),t.enterPost(t.prevArticleInfo,"prev")}}},[t._v("\n        "+t._s(t.prevArticleInfo.title)+"\n      ")])]):t._e(),t._v(" "),t.nextArticleInfo.title?n("div",{staticClass:"next-article"},[n("div",{staticClass:"next"},[t._v("下一篇")]),t._v(" "),n("div",{staticClass:"title",on:{click:function(e){return e.stopPropagation(),t.enterPost(t.nextArticleInfo,"next")}}},[t._v("\n        "+t._s(t.nextArticleInfo.title)+"\n      ")])]):t._e()])])}),[],!1,null,"154d8bd6",null).exports,T=Object(o.b)({components:{ColumnPostItem:E,Left:c.a,Right:v.a},props:{columnList:{type:Array,default:function(){return[]}}},setup:function(t){var e=Object(o.l)(1),n=Object(o.a)((function(){var e;return null!==(e=t.columnList.length)&&void 0!==e?e:0})),l=Object(o.a)((function(){return t.columnList[e.value-1]}));return{currentIndex:e,total:n,currentItem:l,onClickLeft:function(){e.value>1&&(e.value-=1)},onClickRight:function(){e.value<n.value&&(e.value+=1)}}}}),R=(n(2073),Object(D.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.total>0?n("div",{staticClass:"column-container"},[n("div",{staticClass:"column-header"},[n("span",{staticClass:"column-title"},[t._v("本文收录于以下专栏")]),t._v(" "),t.total>1?n("div",{staticClass:"pagination"},[n("Left",{class:["prev",{disabled:1===t.currentIndex}],on:{click:t.onClickLeft}}),t._v(" "),n("div",{staticClass:"number"},[t._v("\n        "+t._s(t.currentIndex+" / "+t.total)+"\n      ")]),t._v(" "),n("Right",{class:["next",{disabled:t.currentIndex===t.total}],on:{click:t.onClickRight}})],1):t._e()]),t._v(" "),t._l(t.columnList,(function(e,o){return n("column-post-item",{directives:[{name:"show",rawName:"v-show",value:t.currentIndex-1===o,expression:"currentIndex - 1 === index"}],key:e.column_info&&e.column_info.column_id,staticClass:"column-content",attrs:{rank:t.currentIndex,column_item:e}})}))],2):t._e()}),[],!1,null,"3b9afad6",null));e.default=R.exports}}]);
//# sourceMappingURL=d6b3d43.js.map