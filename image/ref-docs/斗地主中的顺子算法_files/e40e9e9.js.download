(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1166:function(e,t,o){"use strict";(function(e){o(60),o(79),o(66);var n=o(7),c=o(379),l=o(390),r=o(46),d=o(278);t.a=Object(n.defineComponent)({components:{XituSkeleton:l.a,CommonEmpty:c.b},props:{immediate:{type:Boolean,requried:!0,default:function(){return!1}},scrollEle:{type:null,requried:!1},length:{type:Number,required:!0,default:0},loading:{type:Boolean,required:!0,default:!1},hasMore:{type:Boolean,required:!0,default:!1},emptyText:{type:String,required:!1,default:""},noEmptyIndication:{type:Boolean,required:!1,default:!1}},emits:["loadMore"],setup:function(t,o){var c=o.emit,l=o.root,v=Object(n.ref)(null),f=Object(n.ref)([]),m=Object(n.computed)((function(){return!t.noEmptyIndication&&!t.loading&&0===t.length})),_=Object(n.computed)((function(){return 0===t.length&&t.loading}));Object(n.watch)(v,(function(e){if(l.$device.isDesktop&&e){var t=Object(d.d)(y),o=Object(r.j)(e,y);f.value.push(o,t)}})),Object(n.onBeforeUnmount)((function(){f.value.forEach((function(e){try{e()}catch(e){console.error(e)}}))})),Object(n.onMounted)((function(){e.nextTick((function(){var e;l.$device.isMobile&&t.scrollEle&&(null===(e=t.scrollEle)||void 0===e||e.addEventListener("scroll",y))}))})),Object(n.onUnmounted)((function(){var e;l.$device.isMobile&&t.scrollEle&&(null===(e=t.scrollEle)||void 0===e||e.removeEventListener("scroll",y))}));var y=function(){var e;if(t.immediate&&t.hasMore&&!t.loading)if(t.scrollEle){var o=t.scrollEle,n=o.scrollTop;o.scrollHeight-n-o.offsetHeight<30&&c("loadMore")}else{Object(r.c)(null===(e=v.value)||void 0===e?void 0:e.firstElementChild,v.value)>-200&&c("loadMore")}};return{listEleRef:v,noData:m,initLoad:_}}})}).call(this,o(242))},1378:function(e,t,o){o(10);var n=o(160),c=o(204);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}e.exports={functional:!0,render:function(e,t){var o=t._c,data=(t._v,t.data),r=t.children,d=void 0===r?[]:r,v=data.class,f=data.staticClass,style=data.style,m=data.staticStyle,_=data.attrs,y=void 0===_?{}:_,h=c(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[v,f],style:[style,m],attrs:Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},h),d.concat([o("path",{attrs:{d:"M14.3019 3.69678L8.99862 9.00006L3.69531 14.3034",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}}),o("path",{attrs:{d:"M3.69531 3.69678L8.99861 9.00006L14.3019 14.3034",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}})]))}}},1379:function(e,t,o){},1380:function(e,t,o){},1381:function(e,t,o){},2058:function(e,t,o){e.exports=o.p+"b9d0c7badde6e5569e2390ee4a8cbd24.svg"},2059:function(e,t,o){e.exports=o.p+"c12d6646efb2245fa4e88f0e1a9565b7.svg"},2060:function(e,t,o){e.exports=o.p+"336af4d1fafabcca3b770c8ad7a50781.svg"},2061:function(e,t,o){e.exports=o.p+"e371749f308e0d99430a6a4943eef946.svg"},2062:function(e,t,o){e.exports=o.p+"3d482c7a948bac826e155953b2a28a9e.svg"},2063:function(e,t,o){o(10);var n=o(160),c=o(204);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}e.exports={functional:!0,render:function(e,t){var o=t._c,data=(t._v,t.data),r=t.children,d=void 0===r?[]:r,v=data.class,f=data.staticClass,style=data.style,m=data.staticStyle,_=data.attrs,y=void 0===_?{}:_,h=c(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[v,f],style:[style,m],attrs:Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},h),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.17951 0C5.29095 0 5.33136 0.0116032 5.37211 0.0333916C5.41285 0.05518 5.44482 0.0871535 5.46661 0.127894C5.4884 0.168635 5.5 0.209046 5.5 0.320486V4.5H9.67951C9.79095 4.5 9.83136 4.5116 9.87211 4.53339C9.91285 4.55518 9.94482 4.58715 9.96661 4.62789C9.9884 4.66864 10 4.70905 10 4.82049V5.17951C10 5.29095 9.9884 5.33136 9.96661 5.37211C9.94482 5.41285 9.91285 5.44482 9.87211 5.46661C9.83136 5.4884 9.79095 5.5 9.67951 5.5H5.49975L5.5 9.67951C5.5 9.79095 5.4884 9.83136 5.46661 9.87211C5.44482 9.91285 5.41285 9.94482 5.37211 9.96661C5.33136 9.9884 5.29095 10 5.17951 10H4.82049C4.70905 10 4.66864 9.9884 4.62789 9.96661C4.58715 9.94482 4.55518 9.91285 4.53339 9.87211C4.5116 9.83136 4.5 9.79095 4.5 9.67951L4.49975 5.49975L0.320486 5.5C0.209046 5.5 0.168635 5.4884 0.127894 5.46661C0.0871535 5.44482 0.05518 5.41285 0.0333916 5.37211C0.0116032 5.33136 0 5.29095 0 5.17951V4.82049C0 4.70905 0.0116032 4.66864 0.0333916 4.62789C0.05518 4.58715 0.0871535 4.55518 0.127894 4.53339C0.168635 4.5116 0.209046 4.5 0.320486 4.5L4.5 4.49975V0.320486C4.5 0.209046 4.5116 0.168635 4.53339 0.127894C4.55518 0.0871535 4.58715 0.05518 4.62789 0.0333916C4.66864 0.0116032 4.70905 0 4.82049 0H5.17951Z",fill:"#1E80FF"}})]))}}},2064:function(e,t,o){o(10);var n=o(160),c=o(204);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}e.exports={functional:!0,render:function(e,t){var o=t._c,data=(t._v,t.data),r=t.children,d=void 0===r?[]:r,v=data.class,f=data.staticClass,style=data.style,m=data.staticStyle,_=data.attrs,y=void 0===_?{}:_,h=c(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[v,f],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},h),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3323 4.73333V6.60034H5.66563V4.73333C5.66563 3.44467 6.71029 2.4 7.99896 2.4C9.28762 2.4 10.3323 3.44467 10.3323 4.73333ZM2.39844 8.60034C2.39844 7.5404 3.22297 6.67304 4.26562 6.60468V4.73333C4.26562 2.67147 5.9371 1 7.99896 1C10.0608 1 11.7323 2.67147 11.7323 4.73333V6.60475C12.7745 6.67361 13.5984 7.54075 13.5984 8.60034V13.0003C13.5984 14.1049 12.703 15.0003 11.5984 15.0003H4.39844C3.29387 15.0003 2.39844 14.1049 2.39844 13.0003L2.39844 8.60034ZM7.99805 12.2009C8.77125 12.2009 9.39805 11.5741 9.39805 10.8009C9.39805 10.0277 8.77125 9.40088 7.99805 9.40088C7.22485 9.40088 6.59805 10.0277 6.59805 10.8009C6.59805 11.5741 7.22485 12.2009 7.99805 12.2009Z",fill:"#C2C8D1"}})]))}}},2065:function(e,t,o){o(10);var n=o(160),c=o(204);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}e.exports={functional:!0,render:function(e,t){var o=t._c,data=(t._v,t.data),r=t.children,d=void 0===r?[]:r,v=data.class,f=data.staticClass,style=data.style,m=data.staticStyle,_=data.attrs,y=void 0===_?{}:_,h=c(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[v,f],style:[style,m],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},h),d.concat([o("path",{attrs:{opacity:"0.01","fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 10C0 4.47715 4.47715 0 10 0V0C15.5228 0 20 4.47715 20 10V10C20 15.5228 15.5228 20 10 20V20C4.47715 20 0 15.5228 0 10V10Z",fill:"#E4E6EB"}}),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.6249 6.96828C12.4442 6.78761 12.1513 6.78761 11.9706 6.96828L9.99975 8.93914L8.05418 6.99358C7.87351 6.81291 7.58058 6.81291 7.39991 6.99358L6.99352 7.39997C6.81285 7.58064 6.81285 7.87357 6.99352 8.05424L8.93909 9.9998L6.96802 11.9709C6.78735 12.1515 6.78735 12.4445 6.96802 12.6251L7.37441 13.0315C7.55508 13.2122 7.84801 13.2122 8.02868 13.0315L9.99975 11.0605L11.9961 13.0568C12.1768 13.2375 12.4697 13.2375 12.6504 13.0568L13.0568 12.6504C13.2374 12.4698 13.2374 12.1768 13.0568 11.9962L11.0604 9.9998L13.0313 8.02894C13.2119 7.84827 13.2119 7.55535 13.0313 7.37467L12.6249 6.96828Z",fill:"#252933"}})]))}}},2066:function(e,t,o){o(10);var n=o(160),c=o(204);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}e.exports={functional:!0,render:function(e,t){var o=t._c,data=(t._v,t.data),r=t.children,d=void 0===r?[]:r,v=data.class,f=data.staticClass,style=data.style,m=data.staticStyle,_=data.attrs,y=void 0===_?{}:_,h=c(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[v,f],style:[style,m],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},h),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.8847 2.21464C11.1114 2.42711 11.1228 2.78308 10.9104 3.00972L5.28536 9.00972C5.18118 9.12085 5.03638 9.18497 4.88407 9.18743C4.73176 9.18988 4.58497 9.13046 4.47725 9.02275L1.10225 5.64775C0.882583 5.42808 0.882583 5.07192 1.10225 4.85225C1.32192 4.63258 1.67808 4.63258 1.89775 4.85225L4.86196 7.81647L10.0896 2.24028C10.3021 2.01365 10.6581 2.00216 10.8847 2.21464Z",fill:"#1E80FF"}})]))}}},2067:function(e,t,o){"use strict";o(1379)},2068:function(e,t,o){"use strict";o(1380)},2069:function(e,t,o){"use strict";o(1381)},2419:function(e,t,o){"use strict";o.r(t);o(23),o(64);var n=o(0),c=(o(18),o(5)),l=o(3),r=o(94),d=o(6),v=o(176),f=o(27),m=(o(173),o(174),o(10),o(41),o(8),o(7)),_=o(2063),y=o.n(_),h=o(2064),O=o.n(h),C=o(1378),w=o.n(C),j=(o(240),o(2065)),P=o.n(j),k=o(2066),x=o.n(k),E=o(97),S=o(4);function D(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function L(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var R=Object(m.defineComponent)({components:{BModal:r.Modal,Form:r.Form,FormItem:r.FormItem,BInput:r.Input,BRadioGroup:r.RadioGroup,BRadio:r.Radio,BSwitch:r.Switch,CloseIcon:w.a,RemoveIcon:P.a,SelectedIcon:x.a},props:{visible:{type:Boolean,default:function(){return!1},required:!0},collection:{type:Object,default:function(){return{}}}},emits:["success","close"],setup:function(e,t){var o=t.emit,n=t.root,l=Object(m.ref)(null),f=Object(m.ref)(null),_=Object(m.reactive)({collectionName:"",description:"",permission:0,isCollectFast:!1}),y=Object(m.computed)((function(){var e;return(null===(e=_.collectionName)||void 0===e?void 0:e.trim().length)||0})),h=Object(m.computed)((function(){var t;return(null===(t=null==e?void 0:e.collection)||void 0===t?void 0:t.is_default)||!1})),O=Object(m.computed)((function(){var t;return(null===(t=null==e?void 0:e.collection)||void 0===t?void 0:t.concern_user_count)||0})),C=Object(m.computed)((function(){var e,t,o;return(null===(o=null===(t=null===(e=n.$store.state)||void 0===e?void 0:e.auth)||void 0===t?void 0:t.user)||void 0===o?void 0:o.is_collect_fast)||!1})),w=Object(m.ref)(!1);return Object(m.watch)((function(){return e.visible}),(function(t){var o,n,c;t&&(_.collectionName=(null===(o=e.collection)||void 0===o?void 0:o.collection_name)||"",_.description=(null===(n=e.collection)||void 0===n?void 0:n.description)||"",_.permission=(null===(c=e.collection)||void 0===c?void 0:c.permission)||0,_.isCollectFast=C.value,w.value=!1)})),{inputRef:l,limitWordNum:15,collectionNameLen:y,formData:_,formRef:f,concerCount:O,deaultCollection:h,submit:function(){f.value.validate(Object(c.a)(regeneratorRuntime.mark((function t(){var c,l,f,m,h,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(y.value<=0)){t.next=2;break}return t.abrupt("return");case 2:if(f=_.collectionName.trim(),m=_.description.trim(),E.a.test(f)){t.next=7;break}return r.Message.error("标题仅限中英文及数字"),t.abrupt("return");case 7:if(h={collection_id:e.collection.collection_id||"",collection_name:f,description:m,permission:_.permission},(null===(c=e.collection)||void 0===c?void 0:c.is_default)&&(h.is_collect_fast=_.isCollectFast),t.prev=9,!w.value){t.next=12;break}return t.abrupt("return");case 12:return w.value=!0,t.next=15,v.c.UpdateCollection(h);case 15:(null==(O=t.sent)?void 0:O.err_no)===d.ERROR_NO.OK&&(r.Message.success("".concat((null===(l=e.collection)||void 0===l?void 0:l.collection_id)?"编辑成功":"新建收藏集成功")),_.isCollectFast!==C.value&&n.$store.dispatch(S.FETCH_CURRENT_USER),o("success",(null==O?void 0:O.data)||L(L({},e.collection),h))),setTimeout((function(){w.value=!1}),250),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(9),r.Message.error(null===t.t0||void 0===t.t0?void 0:t.t0.message),w.value=!1;case 24:case"end":return t.stop()}}),t,null,[[9,20]])}))))},close:function(){o("close")},removeCollectionName:function(){var e;_.collectionName="",null===(e=l.value)||void 0===e||e.focus()},handleConcerCheck:function(){O.value>0&&r.Message.error("当前收藏集已被订阅，无法设置为私密")}}}}),T=(o(2067),o(29)),I=Object(T.a)(R,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{staticClass:"collection-modal",attrs:{width:"520px",value:e.visible,"mask-closable":!1,"footer-hide":!0,closable:!1},on:{close:e.close}},[o("CloseIcon",{staticClass:"closeIcon",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}),e._v(" "),o("div",{staticClass:"title"},[e._v("\n    "+e._s(e.collection.collection_id?"编辑":"新建")+"收藏集\n  ")]),e._v(" "),o("Form",{ref:"formRef",staticClass:"form",attrs:{model:e.formData,"label-width":42},nativeOn:{submit:function(e){e.preventDefault()}}},[o("FormItem",{attrs:{label:"名称：",prop:"collectionName"}},[o("b-input",{ref:"inputRef",staticClass:"input",class:{"input-warning":e.collectionNameLen>e.limitWordNum},attrs:{size:"large",placeholder:"请输入收藏集名称"},scopedSlots:e._u([{key:"suffix",fn:function(){return[e.collectionNameLen>0&&e.collectionNameLen<=e.limitWordNum?o("RemoveIcon",{staticClass:"remove-icon",on:{click:e.removeCollectionName}}):e._e(),e._v(" "),e.collectionNameLen>e.limitWordNum?o("span",{staticClass:"suffix"},[o("span",{staticClass:"suffix-red"},[e._v("\n              "+e._s(e.collectionNameLen)+"\n            ")]),e._v("\n            /"+e._s(e.limitWordNum)+"\n          ")]):e._e()]},proxy:!0}]),model:{value:e.formData.collectionName,callback:function(t){e.$set(e.formData,"collectionName",t)},expression:"formData.collectionName"}})],1),e._v(" "),o("FormItem",{attrs:{label:"描述：",prop:"description"}},[o("b-input",{staticClass:"input",attrs:{type:"textarea",maxlength:100,placeholder:"请输入收藏描述（限100字，选填）"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}}),e._v(" "),o("span",{staticClass:"suffix text-suffix"},[o("span",{class:{"suffix-blue":e.formData.description.length}},[e._v("\n          "+e._s(e.formData.description.length)+"\n        ")]),e._v("\n        /100\n      ")])],1),e._v(" "),o("FormItem",{staticClass:"label-no",attrs:{prop:"permission"}},[o("b-radio-group",{model:{value:e.formData.permission,callback:function(t){e.$set(e.formData,"permission",t)},expression:"formData.permission"}},[o("b-radio",{attrs:{label:0}},[o("div",{staticClass:"radio-item"},[o("span",{staticClass:"label"},[e._v("公开")]),e._v(" "),o("span",{staticClass:"desc"},[e._v("当其他人关注此收藏集后不可再更改为隐私")])])]),e._v(" "),o("b-radio",{attrs:{label:1,disabled:e.concerCount>0}},[o("div",{staticClass:"radio-item",on:{click:e.handleConcerCheck}},[o("span",{staticClass:"label"},[e._v("隐私")]),e._v(" "),o("span",{staticClass:"desc"},[e._v("仅自己可见此收藏集")])])])],1)],1),e._v(" "),e.deaultCollection?o("FormItem",{staticClass:"label-no switch-item",attrs:{prop:"permission"}},[o("b-switch",{scopedSlots:e._u([{key:"checked",fn:function(){return[o("div",{staticClass:"switch-button switch-open"},[o("SelectedIcon",{staticClass:"switch-selected"}),e._v("\n            已开启快捷收藏\n          ")],1)]},proxy:!0},{key:"unchecked",fn:function(){return[o("div",{staticClass:"switch-button switch-unopen"},[e._v("开启快捷收藏")])]},proxy:!0}],null,!1,2781810629),model:{value:e.formData.isCollectFast,callback:function(t){e.$set(e.formData,"isCollectFast",t)},expression:"formData.isCollectFast"}}),e._v(" "),o("span",{staticClass:"suffix switch-suffix"},[e._v("\n        开启后收藏文章时不再自动弹出选择面板\n      ")])],1):e._e()],1),e._v(" "),o("div",{staticClass:"button_wrapper"},[o("button",{staticClass:"button close",on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("取消")]),e._v(" "),o("button",{staticClass:"button",class:{finished:e.collectionNameLen<=0,submit:e.collectionNameLen>0},on:{click:function(t){return t.stopPropagation(),e.submit(t)}}},[e._v("\n      确定\n    ")])])],1)}),[],!1,null,"23631f0a",null).exports,M=o(1166).a,F=Object(T.a)(M,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("xitu-skeleton",{model:{value:e.initLoad,callback:function(t){e.initLoad=t},expression:"initLoad"}},[o("div",{ref:"listEleRef"},[e._t("default")],2),e._v(" "),e.noData?o("CommonEmpty",{attrs:{description:e.emptyText||"列表为空"}}):e._e()],1)}),[],!1,null,null,null).exports,N=o(178),B=Object(m.defineComponent)({components:{BModal:r.Modal,BCheckbox:r.Checkbox,PullupLoad:F,CollectPopup:I,CloseIcon:w.a,PermissionIcon:O.a,AddIcon:y.a},props:{visible:{type:Boolean,default:function(){return!1},required:!0},articleId:{type:String,default:function(){return""}},isEdit:{type:Boolean,default:function(){return!1}},isEmptyAllowed:{type:Boolean,default:!1},hideSuccessMessage:{type:Boolean,default:!1}},emits:["close","success"],setup:function(e,t){var o=t.emit,n=t.root,c=Object(m.ref)(!0),l=Object(m.ref)(!1),cursor=Object(m.ref)("0"),f=Object(m.ref)(null),_=Object(m.ref)([]),y=Object(m.ref)(!1),h=function(){y.value=!y.value},O=function(){l.value||(l.value=!0,v.c.GetCollectionSetList({limit:10,cursor:cursor.value,article_id:e.articleId}).then((function(e){e.err_no===d.ERROR_NO.OK&&(_.value=_.value.concat(e.data||[])),c.value=e.has_more||!1,cursor.value=e.cursor||"0"})).finally((function(){l.value=!1})))};return Object(m.watch)((function(){return e.visible}),(function(e){e?(_.value=[],cursor.value="0",c.value=!1,O()):setTimeout((function(){document.body.style.overflow="",document.body.style.paddingRight=""}),350)})),{collectionList:_,collectModalVis:y,hasMore:c,loading:l,listEleRef:f,getCollectionList:O,toggleCollectModal:h,addCollectionSuccess:function(data){_.value=[data].concat(_.value),h(),n.$TEA("collection_list_create",{item_id:"",category_id:"",item_author_id:"",collection_list_auth:data.permission,enter_from:"1",is_default:"0",is_collection_list_desc:data.description.length>0?"1":"0"})},close:function(){o("close")},handleCheckChange:function(e,t){var o=_.value.filter((function(t){return(null==t?void 0:t.collection_id)===e}))[0];o&&(o.is_article_in=t)},submit:function(){var t=_.value.filter((function(e){return e.is_article_in})).map((function(e){return e.collection_id})),n=_.value.filter((function(e){return!e.is_article_in})).map((function(e){return e.collection_id}));if(0===t.length)return e.isEmptyAllowed?void v.c.DeleteArticleFromCollection({article_id:e.articleId}).then((function(e){e.err_no===d.ERROR_NO.OK?(r.Message.success("取消所有收藏集的收藏成功!"),o("success",n,t)):Object(N.a)(e.err_no)||r.Message.error(e.err_msg)})):void r.Message.error("请选择一个收藏集");v.c.AddArticleToCollection({article_id:e.articleId,select_collection_ids:t,unselect_collection_ids:n,is_collect_fast:!1}).then((function(c){c.err_no===d.ERROR_NO.OK?(!e.hideSuccessMessage&&r.Message.success("收藏成功！记得常常温习哦~"),o("success",n,t)):Object(N.a)(c.err_no)||r.Message.error(c.err_msg)}))}}}}),$=(o(2068),Object(T.a)(B,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{staticClass:"collection-list-modal",class:{"collection-list-modal-hide":e.collectModalVis},attrs:{width:"520px",value:e.visible,"mask-closable":!1,"footer-hide":!0,closable:!1},on:{close:e.close}},[e.visible?o("div",{staticClass:"modal-wrap"},[o("collect-popup",{attrs:{visible:e.collectModalVis},on:{success:e.addCollectionSuccess,close:e.toggleCollectModal}}),e._v(" "),o("CloseIcon",{staticClass:"closeIcon",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}),e._v(" "),o("div",{staticClass:"title"},[e._v("选择收藏集")]),e._v(" "),o("div",{staticClass:"sub-title"},[e._v("选择或创建你想添加的收藏集")]),e._v(" "),o("div",{ref:"listEleRef",staticClass:"list"},[o("PullupLoad",{attrs:{immediate:e.visible,"scroll-ele":e.listEleRef,loading:e.loading,length:e.collectionList.length,"has-more":e.hasMore},on:{loadMore:e.getCollectionList}},e._l(e.collectionList,(function(t){return o("div",{key:t.collection_id,staticClass:"list-item",on:{click:function(o){return o.stopPropagation(),e.handleCheckChange(t.collection_id,!t.is_article_in)}}},[o("div",{staticClass:"item-left"},[o("div",{staticClass:"title-box"},[o("span",{staticClass:"name"},[e._v(e._s(t.collection_name))]),e._v(" "),1===t.permission?o("PermissionIcon",{staticClass:"permission-icon"}):e._e(),e._v(" "),t.is_default?o("span",{staticClass:"tag-default"},[e._v("\n                默认\n              ")]):e._e()],1),e._v(" "),o("div",{staticClass:"message-box"},[e._v("\n              "+e._s(t.post_article_count)+"篇文章 ·\n              "+e._s(t.concern_user_count)+"订阅\n            ")])]),e._v(" "),o("div",{staticClass:"item-right",on:{click:function(e){e.stopPropagation()}}},[o("b-checkbox",{staticClass:"checkbox-icon",attrs:{value:t.is_article_in},on:{"on-change":function(o){return e.handleCheckChange(t.collection_id,o)}}})],1)])})),0)],1),e._v(" "),o("div",{staticClass:"footer-wrap"},[o("div",{staticClass:"add-collection",on:{click:e.toggleCollectModal}},[o("AddIcon",{staticClass:"add-icon"}),e._v("\n        新建收藏集\n      ")],1),e._v(" "),o("div",{staticClass:"confirm-btn",on:{click:e.submit}},[e._v("确定")])])],1):e._e()])}),[],!1,null,"2f646e9c",null).exports),A=o(133),U=o(1076),V=o(1098),H=o(207),G=o(24),W=o(391),K=o(1077),Z=o(58),z=o(1047),X=o(241),J=o(1484);function Y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function Q(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Y(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var ee=Object(l.b)({components:{CollectPopupList:$,Icon:r.Icon,Tooltip:r.Tooltip},inject:["getRecommendScoreInfo","getFromPage"],props:{entry:{type:Object},fromPage:{type:String,default:""}},emits:["clickComment"],setup:function(e,t){var o,n=t.root,r=Object(l.l)(!0),d=Object(l.r)(),v=Object(l.l)(!1),m=Object(V.a)().dynamicDataReady,_=Object(l.a)((function(){return d.state.view.column.author})),y=Object(l.a)((function(){var e,t,o;return(null===(t=null===(e=d.state.auth)||void 0===e?void 0:e.user)||void 0===t?void 0:t.id)?null===(o=d.state.auth)||void 0===o?void 0:o.user:void 0})),h=Object(l.l)(!0),O=n.$getBean("eventBus");O.on(O.eventType.HEADER_NAV_VISIBILITY_CHANGE,(function(e){r.value=Boolean(e)}));var C=Object(U.a)({itemType:G.c.UserType,teaFollowType:z.b.other}),w=C.doFollow,j=C.traceFollowShow,P=Object(J.a)({getIsFollow:function(){return _.value.followed},getUid:function(){return _.value.id},getRecommendCurUserReq:function(){var t,o,n;return{item_id:null===(t=e.entry)||void 0===t?void 0:t.id,item_type:f.g.IdType.ArticleIdType,category_id:null===(n=null===(o=e.entry)||void 0===o?void 0:o.category)||void 0===n?void 0:n.category_id,author_id:_.value.id}},teaGuideType:4}),k=P.isUserFollowPopupShow,x=P.followContentVisible,E=P.closeUserFollowPopup,S=P.FOLLOW_USER_TIP_TEXT;Object(l.s)(k,(function(e){e&&(r.value=e,d.dispatch(W.c,4))}));var D,L=Object(l.a)((function(){var e;return!!y.value&&!(!_.value.id||_.value.id!==(null===(e=y.value)||void 0===e?void 0:e.id))})),R=Object(l.a)((function(){var t,o;return(null===(o=null===(t=e.entry)||void 0===t?void 0:t.author_user_info)||void 0===o?void 0:o.avatar_large)||""}));return Object(l.h)((function(){x(!0)})),Object(l.i)((function(){o&&window.clearTimeout(o)})),{closeUserFollowPopup:E,isUserFollowPopupShow:k,FOLLOW_USER_TIP_TEXT:S,onFollowBtnShow:function(e){e&&j()},author:_,visible:r,avatarUrl:R,isMe:L,isOpenButtonVisible:h,clickFollow:(D=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.value.followed){e.next=2;break}return e.abrupt("return");case 2:return v.value=!0,o&&window.clearTimeout(o),o=window.setTimeout((function(){v.value=!1}),3e3),e.next=7,w(_.value.id,G.c.UserType);case 7:(null==(t=e.sent)?void 0:t.isSuccess)&&d.dispatch(W.b);case 9:case"end":return e.stop()}}),e)}))),function(){return D.apply(this,arguments)}),clickUser:function(){window.open("/user/".concat(_.value.id),"_blank")},userAction:v,dynamicDataReady:m}},data:function(){return{likeLock:Object(K.a)(),isCollectPopupVisible:!1}},computed:{collectText:function(){return"".concat(this.entry.collected?"已":"","收藏")},currentUser:function(){var e;return(null===(e=this.$store.state.auth)||void 0===e?void 0:e.user)||{}}},methods:{togglePraise:function(){var e=this;this.likeLock.do((function(){return e.$ensureAuthorized({loginGuideFrom:A.b.like_login}).then((function(){return e.$ensureBindPhone({bindLabel:H.b.interact})})).then((function(){var t,o,n,c,l,r,d,v,f,m,_;e.$TEA("item_like_click",Q(Q({event_page:Z.a.articleDetail,req_id:null===(t=e.entry)||void 0===t?void 0:t.req_id,boost_type:null===(n=null===(o=e.entry)||void 0===o?void 0:o.extra)||void 0===n?void 0:n.boost_type,category_id:null===(l=null===(c=e.entry)||void 0===c?void 0:c.category)||void 0===l?void 0:l.category_id,from_page:Object(Z.b)(e.fromPage),from_page_type:Object(Z.c)(),item_id:null===(r=e.entry)||void 0===r?void 0:r.article_id,item_type:2,item_author_id:null===(v=null===(d=e.entry)||void 0===d?void 0:d.author_user_info)||void 0===v?void 0:v.user_id,from_item_id:null===(f=e.entry)||void 0===f?void 0:f.article_id,from_item_type:2,action:(null===(m=e.entry)||void 0===m?void 0:m.liked)?1:2},Object(X.f)(e.entry)),null===(_=e.getRecommendScoreInfo)||void 0===_?void 0:_.call(e)))})).then((function(){return e.$store.dispatch(S.TOGGLE_LIKE_ENTRY,e.entry).catch((function(t){e.$error("操作失败, 请稍后重试"),console.error(t)}))})).catch((function(e){console.error(e)}))}))},linkToMobileCollection:function(){var e,t,o,n,c,l,f=this,m=null===(e=this.entry)||void 0===e?void 0:e.article_id;this.$TEA("collection_click",Q({item_id:m,category_id:null===(o=null===(t=this.entry)||void 0===t?void 0:t.category)||void 0===o?void 0:o.category_id,item_author_id:null===(c=null===(n=this.entry)||void 0===n?void 0:n.author_user_info)||void 0===c?void 0:c.user_id,enter_from:"bottom_bar"},null===(l=this.getRecommendScoreInfo)||void 0===l?void 0:l.call(this))),this.$ensureAuthorized({loginGuideFrom:A.b.collect_login}).then((function(){var e,t;if(f.entry.collected){var o=Q({item_id:f.entry.article_id,category_id:f.entry.category_id,item_author_id:f.entry.author_user_id,from_page:Object(Z.b)(f.fromPage),collection_list_ids:"",action:"0"},null===(e=f.getRecommendScoreInfo)||void 0===e?void 0:e.call(f));return f.$TEA("collection_list_save",o),void v.c.DeleteArticleFromCollection({article_id:m}).then((function(e){(null==e?void 0:e.err_no)===d.ERROR_NO.OK&&(r.Message.success("取消收藏"),f.handleCollect(!1))}))}if(f.currentUser.is_collect_fast){var n=Q({item_id:f.entry.article_id,category_id:f.entry.category_id,item_author_id:f.entry.author_user_id,collection_list_ids:"",action:"1",from_page:Object(Z.b)(f.fromPage)},null===(t=f.getRecommendScoreInfo)||void 0===t?void 0:t.call(f));return f.$TEA("collection_list_save",n),f.collectPopoverVisible=!0,void v.c.AddArticleToCollection({article_id:m,is_collect_fast:!0}).then((function(e){(null==e?void 0:e.err_no)===d.ERROR_NO.OK&&(f.handleCollect(!0),r.Message.success("收藏成功"))})).catch((function(e){r.Message.error(null==e?void 0:e.message)}))}f.isCollectPopupVisible=!f.isCollectPopupVisible})).catch((function(e){console.log(e)}))},handleCollect:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.commit("view/column/UPDATE_STATE",{entry:Q(Q({},this.entry),{},{collected:e})})},onCollectSuccess:function(e,t){var o=this;this.isCollectPopupVisible=!1,this.handleCollect(!0),t.map((function(e){var t,n=Q({item_id:o.entry.article_id,category_id:o.entry.category_id,item_author_id:o.entry.author_user_id,collection_list_ids:e,action:"1",from_page:Object(Z.b)(o.fromPage)},null===(t=o.getRecommendScoreInfo)||void 0===t?void 0:t.call(o));o.$TEA("collection_list_save",n)}))}}}),te=(o(2069),Object(T.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"action-box-wrap",class:{hidden:!e.visible}},[n("div",{staticClass:"action-box"},[n("div",{staticClass:"action-left"},[n("div",{staticClass:"action",class:{active:e.entry.liked},on:{click:e.togglePraise}},[n("div",{staticClass:"action-title-box"},[e.dynamicDataReady&&e.entry.liked?[n("img",{attrs:{src:o(2058)}})]:[n("img",{attrs:{src:o(2059)}})],e._v(" "),n("span",{staticClass:"action-title"},[e.dynamicDataReady?[e.entry.likedCount?n("span",[e._v("\n                "+e._s(e._f("formatTenThousand")(e.entry.likedCount))+"\n              ")]):n("span",[e._v("点赞")])]:e._e()],2)],2)]),e._v(" "),n("div",{staticClass:"action",on:{click:function(t){return e.$emit("clickComment")}}},[n("div",{staticClass:"action-title-box"},[n("img",{attrs:{src:o(2060)}}),e._v(" "),n("span",{staticClass:"action-title"},[e.dynamicDataReady?[e.entry.commentsCount?[e._v("\n                "+e._s(e._f("formatTenThousand")(e.entry.commentsCount))+"\n              ")]:[e._v("评论")]]:e._e()],2)])]),e._v(" "),n("div",{staticClass:"action",on:{click:e.linkToMobileCollection}},[n("div",{staticClass:"action-title-box"},[e.dynamicDataReady&&e.entry.collected?n("img",{attrs:{src:o(2061)}}):n("img",{attrs:{src:o(2062)}}),e._v(" "),n("span",{staticClass:"action-title"},[e._v("\n            "+e._s(e.dynamicDataReady?e.collectText:"")+"\n          ")])])])]),e._v(" "),n("div",{staticClass:"split"}),e._v(" "),n("div",{staticClass:"action-user"},[n("client-only",[n("Tooltip",{attrs:{placement:"top",theme:"dark","z-index":100,content:"","append-to-body":!1},scopedSlots:e._u([{key:"content",fn:function(){return[n("span",[e._v(e._s(e.FOLLOW_USER_TIP_TEXT))]),e._v(" "),n("Icon",{staticStyle:{cursor:"pointer",color:"var(--juejin-font-3)","margin-left":"10px"},attrs:{type:"close"},on:{click:e.closeUserFollowPopup}})]},proxy:!0}]),model:{value:e.isUserFollowPopupShow,callback:function(t){e.isUserFollowPopupShow=t},expression:"isUserFollowPopupShow"}},[e._v(" "),n("Avatar",{staticClass:"action-user-avatar",attrs:{url:e.avatarUrl,size:32},nativeOn:{click:function(t){return t.stopPropagation(),e.clickUser(t)}}},[e.isMe?e._e():n("div",{staticClass:"follow-area",class:{"user-action":e.userAction},on:{click:function(t){return t.stopPropagation(),e.clickFollow(t)}}},[e.author.followed?n("div",{staticClass:"follow-success"},[n("Icon",{attrs:{type:"check"}})],1):n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:e.onFollowBtnShow,expression:"onFollowBtnShow",modifiers:{once:!0}}],staticClass:"follow-text"},[e._v("\n                关注\n              ")])])])],1)],1)],1),e._v(" "),n("CollectPopupList",{attrs:{visible:e.isCollectPopupVisible,"article-id":e.entry&&e.entry.article_id||"","is-edit":e.entry.collected},on:{close:function(t){e.isCollectPopupVisible=!1},success:e.onCollectSuccess}})],1)])}),[],!1,null,"935cc2c6",null));t.default=te.exports}}]);
//# sourceMappingURL=e40e9e9.js.map